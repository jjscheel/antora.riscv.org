<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>RISC-V ELF Specification :: RISC-V Ratified Specifications Library</title>
    <link rel="prev" href="riscv-cc.html">
    <link rel="next" href="riscv-dwarf.html">
    <meta name="generator" content="Antora 3.1.12">
    <script>
!function (theme, navWidth) {
  if (theme === 'dark') document.documentElement.classList.add('dark-theme')
  if (navWidth) document.documentElement.style.setProperty('--nav-width', `${navWidth}px`)
}(localStorage && localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)')?.matches && 'dark'),
  localStorage && localStorage.getItem('nav-width'))
    </script>
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/vendor/search.css">
    <link rel="stylesheet" href="../../_/css/vendor/page-search.css">
    <link rel="stylesheet" href="../../_/css/vendor/spring-tabs.css">

    <meta name="antora-ui-version" content="1ea0d9f81bc80a15c1f560d76c5d8bddea1856e2"> 
    <meta name="version" content="v1.0">
    <meta name="component" content="psabi">
    <meta name="latest-version" content="false">
    <link rel="icon" href="../../_/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">


<header class="header" id="antora-header">
    <nav class="navbar">
        <head>
            <link data-rh="true" rel="icon" href="/img/favicon.ico">
            <link data-rh="true" rel="canonical" href="https://developer.riscv.org/ref">
            <link data-rh="true" rel="alternate" href="https://developer.riscv.org/ref" hreflang="en">
            <link data-rh="true" rel="alternate" href="https://developer.riscv.org/ref" hreflang="x-default">
            <link data-rh="true" rel="preconnect" href="https://MGVPU7BN22-dsn.algolia.net" crossorigin="anonymous">
            <link rel="stylesheet" type="text/css" href="/docs/reference/_/docusaurus-styles-copy-08-25.css">

        </head>

            <link rel="preload" as="image" href="/img/logo.svg">
            <div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div>
            <div class="announcementBar_mb4j" role="banner">
                <div class="announcementBarPlaceholder_vyr4"></div>
                <div class="content_knG7 announcementBarContent_xLdY">congratulations, you found the RISC-V Developer Portal! ðŸŽ‰ . This site is under active development and not meant for public consumption yet.</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div>
            <nav aria-label="Main" class="navbar ">
                <div class="navbar__inner">
                    <div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button>
                        <a class="navbar__brand" href="/">
                            <div class="navbar__logo"><img src="/img/logo.svg" alt="RISC-V Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="RISC-V Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Home</b></a>
                        <div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Specifications</a>
                            <ul class="dropdown__menu">
                                <li><a class="dropdown__link" href="/docs/spec/isa">ISA</a></li>
                                <li><a class="dropdown__link" href="/docs/spec/profiles">Profiles</a></li>
                                <li><a class="dropdown__link" docid="spec/non-isa" href="/docs/spec/non-isa">Non-ISA</a></li>
                            </ul>
                        </div>
                        <div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Developers</a>
                            <ul class="dropdown__menu">
                                <li><a class="dropdown__link" href="/docs/spec/intro">Specification Developers</a></li>
                                <li><a class="dropdown__link" href="/docs/hardware/overview">Hardware Developers</a></li>
                                <li><a class="dropdown__link" href="/docs/software/overview">Software Developers</a></li>
                            </ul>
                        </div><a class="navbar__item navbar__link" href="/blog">Blog</a><a href="https://riscv.org/community/calendar/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Events<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div>
                    <div class="navbar__items navbar__items--right">
                      <div class="navbarSearchContainer_Bca1">
                        <button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)">
                          <span class="DocSearch-Button-Container">
                            <svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true">
                              <path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path>
                            </svg>
                            <span class="DocSearch-Button-Placeholder">Search</span>
                          </span>
                          <span class="DocSearch-Button-Keys"></span>
                        </button>
                      </div>
                    </div>
                </div>
                <div role="presentation" class="navbar-sidebar__backdrop"></div>
            </nav>
            <div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper__tJE"></div>
        

    </nav>
</header><div class="body">
<div class="nav-container" data-component="psabi" data-version="v1.0">
  <aside class="nav">
    <div class="panels">
      <div class="nav-panel-menu is-active" data-panel="menu">
        <nav class="nav-menu">
<div class="context">
  <span class="title">ELF psABI Specification</span>
  <span class="version">v1.0</span>
  <button class="browse-version" id="browse-version">
    <svg
      height="24px"
      id="Layer_1"
      style="enable-background:new 0 0 512 512;"
      version="1.1"
      viewBox="0 0 512 512"
      width="24px"
      xml:space="preserve"
    ><g><path
          d="M256,224c-17.7,0-32,14.3-32,32s14.3,32,32,32c17.7,0,32-14.3,32-32S273.7,224,256,224L256,224z"
        ></path><path
          d="M128.4,224c-17.7,0-32,14.3-32,32s14.3,32,32,32c17.7,0,32-14.3,32-32S146,224,128.4,224L128.4,224z"
        ></path><path
          d="M384,224c-17.7,0-32,14.3-32,32s14.3,32,32,32s32-14.3,32-32S401.7,224,384,224L384,224z"
        ></path></g></svg>
  </button>
  </div><ul class="nav-list">
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">RISC-V ABI Specifications</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="introduction.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="riscv-cc.html">Calling Conventions</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link"  href="riscv-elf.html">ELF Specification</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="riscv-dwarf.html">DWARF Specification</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="riscv-rtabi.html">Runtime ABI</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="riscv-atomic.html">Atomic Operations</a>
  </li>
</ul>
  </li>
</ul>
          <div class="toggle-sm">
            <button id="nav-toggle-2" class="nav-toggle"></button>
          </div>
        </nav>
      </div>
      <div class="nav-collapse">
        <button id="nav-collapse-toggle"><span></span></button>        
      </div>
    </div>
    <div class="nav-resize"></div>
  </aside>
</div>
<script>
!function (sidebar) {
  if (sidebar) {
    document.body.classList.add('nav-sm')
  }
}(localStorage && localStorage.getItem('sidebar') === 'close')
</script><main class="article">
<div class="toolbar" role="navigation">
  <button id="nav-toggle-1" class="nav-toggle"></button>
</div>
  <div class="content">
<aside class="sidebar">
  <div class="content">
    <div
      class="toc"
      data-title="RISC-V ELF Specification"
      data-levels="2"
    >
      <div class="toc-menu"></div>
    </div>
    <div class="sidebar-links">
        <a href="https://github.com/riscv-non-isa/riscv-elf-psabi-doc/edit/antora-refactor/modules/ROOT/pages/riscv-elf.adoc">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="24"
            viewBox="0 0 24 24"
            width="24"
          ><path
              d="m16 2.012 3 3L16.713 7.3l-3-3zM4 14v3h3l8.299-8.287-3-3zm0 6h16v2H4z"
            ></path></svg>
          Edit this Page
        </a>
              <a href="https://github.com/riscv-non-isa/riscv-elf-psabi-doc" title="Source Repository">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="512px" height="512px" fill="none">
    <path d="M23.6188 12.9999L19.8886 2.82896C19.7371 2.4083 19.122 2.4083 18.9705 2.82896L16.494 9.99994H7.50604L5.02956 2.82896C4.87803 2.4083 4.26295 2.4083 4.11142 2.82896L0.381247 12.9999C0.276408 13.289 0.404366 13.6112 0.678 13.7651L11.5243 19.6958C11.8256 19.8611 12.1744 19.8611 12.4757 19.6958L23.322 13.7651C23.5956 13.6112 23.7236 13.289 23.6188 12.9999Z" fill="#E24329"/>
    <path d="M12.0001 19.1956L16.4941 9.99996H7.5061L12.0001 19.1956Z" fill="#FCA326"/>
    <path d="M12.0001 19.1955L7.5061 9.99988H3.24121L12.0001 19.1955Z" fill="#E24329"/>
    <path d="M3.24121 9.99988L0.381226 12.9998C0.276388 13.2889 0.404345 13.6111 0.678 13.765L12.0001 19.1955L3.24121 9.99988Z" fill="#FCA326"/>
    <path d="M12.0001 19.1955L16.4941 9.99988H20.7589L12.0001 19.1955Z" fill="#E24329"/>
    <path d="M20.7589 9.99988L23.6188 12.9998C23.7237 13.2889 23.5957 13.6111 23.322 13.765L12.0001 19.1955L20.7589 9.99988Z" fill="#FCA326"/>
    <path d="M16.494 9.99988H20.7589L18.9705 2.82894C18.819 2.40828 18.2039 2.40828 18.0524 2.82894L16.494 9.99988Z" fill="#E24329"/>
    <path d="M7.50603 9.99988H3.24121L4.11141 2.82894C4.26294 2.40828 4.87802 2.40828 5.02955 2.82894L7.50603 9.99988Z" fill="#E24329"/>
  </svg>
  Source Repository
</a>
    </div>
  </div>
</aside>
<article class="doc">
<div class="breadcrumbs-container">
  <nav class="breadcrumbs" aria-label="breadcrumbs">
    <ul>
      <li><a href="index.html">ELF psABI Specification</a></li>
      <li>RISC-V ABI Specifications</li>
      <li><a href="riscv-elf.html">ELF Specification</a></li>
    </ul>
  </nav>
</div><h1 id="page-title" class="page">RISC-V ELF Specification</h1>
<div class="sect1">
<h2 id="code-models"><a class="anchor" href="#code-models"></a>Code Models</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The RISC-V architecture constrains the addressing of positions in the
address space.  There is no single instruction that can refer to an arbitrary
memory position using a literal as its argument.  Rather, instructions exist
that, when combined together, can then be used to refer to a memory position
via its literal.  And, when not, other data structures are used to help the
code to address the memory space.  The coding conventions governing their use
are known as code models.</p>
</div>
<div class="paragraph">
<p>However, some code models can&#8217;t access the whole address space. The linker may
raise an error if it cannot adjust the instructions to access the target address
in the current code model.</p>
</div>
<div class="sect2">
<h3 id="medium-low-code-model"><a class="anchor" href="#medium-low-code-model"></a>Medium Low Code Model</h3>
<div class="paragraph">
<p>The medium low code model, or <code>medlow</code>, allows the code to address the whole RV32
address space or the lower 2 GiB and highest 2 GiB of the RV64 address space
(<code>0xFFFFFFFF7FFFF800</code> ~ <code>0xFFFFFFFFFFFFFFFF</code> and <code>0x0</code> ~ <code>0x000000007FFFF7FF</code>).
By using the <code>lui</code> and load / store instructions, when referring to an object, or
<code>addi</code>, when calculating an address literal, for example,
a 32-bit address literal can be produced.</p>
</div>
<div class="paragraph">
<p>The following instructions show how to load a value, store a value, or calculate
an address in the <code>medlow</code> code model.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    # Load value from a symbol
    lui  a0, %hi(symbol)
    lw   a0, %lo(symbol)(a0)

    # Store value to a symbol
    lui  a0, %hi(symbol)
    sw   a1, %lo(symbol)(a0)

    # Calculate address
    lui  a0, %hi(symbol)
    addi a0, a0, %lo(symbol)</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The ranges on RV64 are not <code>0x0</code> ~ <code>0x000000007FFFFFFF</code> and
<code>0xFFFFFFFF80000000</code> ~ <code>0xFFFFFFFFFFFFFFFF</code> due to RISC-V&#8217;s sign-extension of
immediates; the following code fragments show where the ranges come from:
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm"># Largest postive number:
lui a0, 0x7ffff # a0 = 0x7ffff000
addi a0, 0x7ff # a0 = a0 + 2047 = 0x000000007FFFF7FF

# Smallest negative number:
lui a0, 0x80000 # a0 = 0xffffffff80000000
addi a0, a0, -0x800 # a0 = a0 + -2048 = 0xFFFFFFFF7FFFF800</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="medium-any-code-model"><a class="anchor" href="#medium-any-code-model"></a>Medium Any Code Model</h3>
<div class="paragraph">
<p>The medium any code model, or <code>medany</code>, allows the code to address the range
between -2 GiB and +2 GiB from its position.  By using <code>auipc</code>
and load / store instructions, when referring to an object, or
<code>addi</code>, when calculating an address literal, for example,
a signed 32-bit offset, relative to the value of the <code>pc</code> register,
can be produced.</p>
</div>
<div class="paragraph">
<p>As a special edge-case, undefined weak symbols must still be supported, whose
addresses will be 0 and may be out of range depending on the address at which
the code is linked. Any references to possibly-undefined weak symbols should be
made indirectly through the GOT as is used for position-independent code. Not
doing so is deprecated and a future version of this specification will require
using the GOT, not just advise.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This is not yet a requirement as existing toolchains predating this part
of the specification do not adhere to this, and without improvements to linker
relaxation support doing so would regress performance and code size.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following instructions show how to load a value, store a value, or calculate
an address in the medany code model.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">         # Load value from a symbol
.Ltmp0:  auipc a0, %pcrel_hi(symbol)
         lw    a0, %pcrel_lo(.Ltmp0)(a0)

         # Store value to a symbol
.Ltmp1:  auipc a0, %pcrel_hi(symbol)
         sw    a1, %pcrel_lo(.Ltmp1)(a0)

         # Calculate address
.Ltmp2:  auipc a0, %pcrel_hi(symbol)
         addi  a0, a0, %pcrel_lo(.Ltmp2)</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Although the generated code is technically position independent, it&#8217;s not
suitable for ELF shared libraries due to differing symbol interposition rules;
for that, please use the medium position independent code model below.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The address space of RV64ILP32* ABIs is not continuous in the middle.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="medium-position-independent-code-model"><a class="anchor" href="#medium-position-independent-code-model"></a>Medium Position Independent Code Model</h3>
<div class="paragraph">
<p>This model is similar to the medium any code model, but uses the
<a href="#global-offset-table">global offset table</a> (GOT) for non-local symbol addresses.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">         # Load value from a local symbol
.Ltmp0:  auipc a0, %pcrel_hi(symbol)
         lw    a0, %pcrel_lo(.Ltmp0)(a0)

         # Store value to a local symbol
.Ltmp1:  auipc a0, %pcrel_hi(symbol)
         sw    a1, %pcrel_lo(.Ltmp1)(a0)

         # Calculate address of a local symbol
.Ltmp2:  auipc a0, %pcrel_hi(symbol)
         addi  a0, a0, %pcrel_lo(.Ltmp2)

         # Calculate address of non-local symbol
.Ltmp3:  auipc  a0, %got_pcrel_hi(symbol)
         l[w|d] a0, %pcrel_lo(.Ltmp3)(a0)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="large-code-model"><a class="anchor" href="#large-code-model"></a>Large Code Model</h3>
<div class="paragraph">
<p>The <code>large</code> code model allows the code to address the whole RV64 address space.
Thus, this model is only available for RV64. By putting object addresses
into literal pools, a 64-bit address literal can be loaded from the pool.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Because calculating the pool entry address must use <code>auipc</code> and
<code>addi</code> or <code>ld</code>, each pool entry has to be located within the range
between -2GiB and +2GiB from its access intructions.  In general, the pool
is appended in .text section or put into .rodata section.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">         # Get address of a symbol
         # Literal pool
.LCPI0:
         .8byte symbol
         ...
.Ltmp0:  auipc   a0, %pcrel_hi(.LCPI0)
         ld      a0, %pcrel_lo(.Ltmp0)(a0)</code></pre>
</div>
</div>
<div class="paragraph">
<p>This model also changes the function call patterns. An external function
address must be loaded from a literal pool entry, and use <code>jalr</code> to jump to
the target function.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Same as getting address of symbol, each pool entry has to be located
within the range between -2GiB and +2GiB from its access intructions.  The
function call can reach the whole 64-bit address space.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The code generation of function call may be changed after the range
extension thunk is implemented. The compiler can emit <code>call</code> directly,
and leave the model variation to the linker which could decide to jump
via the literal pool or not.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">         # Function call
         # Literal pool
.LCPI1:
         .8byte function
         ...
.Ltmp1:  auipc   a0, %pcrel_hi(.LCPI1)
         ld      a0, %pcrel_lo(.Ltmp1)(a0)
         jalr    a0</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Large code model is disallowed to be used with PIC code model.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
There will be more different code generation strategies for different
usage purposes in the future.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dynamic-linking"><a class="anchor" href="#dynamic-linking"></a>Dynamic Linking</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Any functions that use registers in a way that is incompatible with
the calling convention of the ABI in use must be annotated with
<code>STO_RISCV_VARIANT_CC</code>, as defined in <a href="#symbol-table">Symbol Table</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Vector registers have a variable size depending on the hardware
implementation and can be quite large. Saving/restoring all these vector
arguments in a run-time linker&#8217;s lazy resolver would use a large amount of
stack space and hurt performance. <code>STO_RISCV_VARIANT_CC</code> attribute will require
the run-time linker to resolve the symbol directly to prevent saving/restoring
any vector registers.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="c-name-mangling"><a class="anchor" href="#c-name-mangling"></a>C&#43;&#43; Name Mangling</h2>
<div class="sectionbody">
<div class="paragraph">
<p>C&#43;&#43; name mangling for RISC-V follows
the <em>Itanium C&#43;&#43; ABI</em> <a href="#itanium-cxx-abi">[itanium-cxx-abi]</a>;
plus mangling for RISC-V vector data types and vector mask types,
which are defined in the following section.</p>
</div>
<div class="paragraph">
<p>See the "Type encodings" section in <em>Itanium C&#43;&#43; ABI</em>
for more detail on how to mangle types. Note that <code>__bf16</code> is mangled in the
same way as <code>std::bfloat16_t</code>.</p>
</div>
<div class="sect2">
<h3 id="name-mangling-for-vector-data-types-vector-mask-types-and-vector-tuple-types"><a class="anchor" href="#name-mangling-for-vector-data-types-vector-mask-types-and-vector-tuple-types"></a>Name Mangling for Vector Data Types, Vector Mask Types and Vector Tuple Types.</h3>
<div class="paragraph">
<p>The vector data types and vector mask types, as defined in the section
<a href="#Vector Type Sizes and Alignments">[Vector Type Sizes and Alignments]</a>, are treated as vendor-extended types in
the <em>Itanium C&#43;&#43; ABI</em> <a href="#itanium-cxx-abi">[itanium-cxx-abi]</a>. These mangled name for
these types is <code>"u"&lt;len&gt;"<em>rvv_"&lt;type-name&gt;</code>. Specifically,
prefixing the type name with <code></em>rvv_</code>, which is prefixed by
a decimal string indicating its length, which is prefixed by "u".</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">    void foo(vint8m1_t x);</code></pre>
</div>
</div>
<div class="paragraph">
<p>is mangled as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">    _Z3foou15__rvv_vint8m1_t</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-abnf hljs" data-lang="abnf">mangled-name = "u" len "__rvv_" type-name

len = nonzero *DIGIT
nonzero = "1" / "2" / "3" / "4" / "5" / "6" / "7" / "8" / "9"

type-name = identifier-nondigit *identifier-char
identifier-nondigit = ALPHA / "_"
identifier-char = identifier-nondigit / "_"</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="elf-object-files"><a class="anchor" href="#elf-object-files"></a>ELF Object Files</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The ELF object file format for RISC-V follows the
<em>Generic System V Application Binary Interface</em> <a href="#gabi">[gabi]</a>
("gABI"); this specification only describes RISC-V-specific definitions.</p>
</div>
<div class="sect2">
<h3 id="file-header"><a class="anchor" href="#file-header"></a>File Header</h3>
<div class="paragraph">
<p>The section below lists the defined RISC-V-specific values for several ELF
header fields; any fields not listed in this section have no RISC-V-specific
values.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">e_ident</dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">EI_CLASS</dt>
<dd>
<p>Specifies the ABIs, either ILP32*, LP64* or RV64ILP32*.
Linking different ABIs' code together is not supported.</p>
<div class="openblock">
<div class="content">
<div id="ELFCLASS64" class="hdlist">
<table>
<tr>
<td class="hdlist1">
ELFCLASS64
</td>
<td class="hdlist2">
<p>ELF-64 Object File</p>
</td>
</tr>
</table>
</div>
<div id="ELFCLASS32" class="hdlist">
<table>
<tr>
<td class="hdlist1">
ELFCLASS32
</td>
<td class="hdlist2">
<p>ELF-32 Object File</p>
</td>
</tr>
</table>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">EI_DATA</dt>
<dd>
<p>Specifies the endianness; either big-endian or little-endian.
Linking big-endian and little-endian code together is not supported.</p>
<div class="openblock">
<div class="content">
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
ELFDATA2LSB
</td>
<td class="hdlist2">
<p>Little-endian Object File</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ELFDATA2MSB
</td>
<td class="hdlist2">
<p>Big-endian Object File</p>
</td>
</tr>
</table>
</div>
</div>
</div>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1">e_machine</dt>
<dd>
<p>Identifies the machine this ELF file targets.  Always contains
EM_RISCV (243) for RISC-V ELF files.</p>
</dd>
<dt class="hdlist1">e_flags</dt>
<dd>
<p>Describes the format of this ELF file.  These flags are used by the
linker to disallow linking ELF files with incompatible ABIs together,
<a href="#e-flags-layout">Layout of e_flags</a> shows the layout of e_flags, and flag details are listed
below.</p>
<table id="e-flags-layout" class="tableblock frame-all grid-all" style="width: 80%;">
<caption class="title">Table 1. Layout of e_flags</caption>
<colgroup>
<col style="width: 7.1428%;">
<col style="width: 14.2857%;">
<col style="width: 7.1428%;">
<col style="width: 7.1428%;">
<col style="width: 7.1428%;">
<col style="width: 21.4285%;">
<col style="width: 35.7146%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Bit 0</th>
<th class="tableblock halign-left valign-top">Bits 1 - 2</th>
<th class="tableblock halign-left valign-top">Bit 3</th>
<th class="tableblock halign-left valign-top">Bit 4</th>
<th class="tableblock halign-left valign-top">Bit 5</th>
<th class="tableblock halign-left valign-top">Bits 6 - 23</th>
<th class="tableblock halign-left valign-top">Bits 24 - 31</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RVC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Float ABI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RVE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TSO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RV64ILP32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Reserved</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Non-standard extensions</strong></p></td>
</tr>
</tbody>
</table>
<div class="openblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">EF_RISCV_RVC (0x0001)</dt>
<dd>
<p>This bit is set when the binary targets the C ABI,
which allows instructions to be aligned to 16-bit boundaries (the base RV32
and RV64 ISAs only allow 32-bit instruction alignment).  When linking
objects which specify EF_RISCV_RVC, the linker is permitted to use RVC
instructions such as C.JAL in the linker relaxation process.</p>
</dd>
<dt class="hdlist1">EF_RISCV_FLOAT_ABI_SOFT (0x0000)</dt>
</dl>
</div>
<div id="EF_RISCV_FLOAT_ABI_SOFT" class="dlist">
<dl>
<dt class="hdlist1">EF_RISCV_FLOAT_ABI_SINGLE (0x0002)</dt>
</dl>
</div>
<div id="EF_RISCV_FLOAT_ABI_SINGLE" class="dlist">
<dl>
<dt class="hdlist1">EF_RISCV_FLOAT_ABI_DOUBLE (0x0004)</dt>
</dl>
</div>
<div id="EF_RISCV_FLOAT_ABI_DOUBLE" class="dlist">
<dl>
<dt class="hdlist1">EF_RISCV_FLOAT_ABI_QUAD (0x0006)</dt>
<dd>
<p><a id="EF_RISCV_FLOAT_ABI_QUAD"></a> These flags identify the floating point
  ABI in use for this ELF file.  They store the largest floating-point type
  that ends up in registers as part of the ABI (but do not control if code
  generation is allowed to use floating-point internally).  The rule is that
  if you have a floating-point type in a register, then you also have all
  smaller floating-point types in registers.  For example _DOUBLE would
  store "float" and "double" values in F registers, but would not store "long
  double" values in F registers.  If none of the float ABI flags are set, the
  object is taken to use the soft-float ABI.</p>
</dd>
<dt class="hdlist1">EF_RISCV_FLOAT_ABI (0x0006)</dt>
<dd>
<p>This macro is used as a mask to test for one
of the above floating-point ABIs, e.g.,
<code>(e_flags &amp; EF_RISCV_FLOAT_ABI) == EF_RISCV_FLOAT_ABI_DOUBLE</code>.</p>
</dd>
</dl>
</div>
<div id="EF_RISCV_RVE" class="dlist">
<dl>
<dt class="hdlist1">EF_RISCV_RVE (0x0008)</dt>
<dd>
<p>This bit is set when the binary targets the E ABI.</p>
</dd>
<dt class="hdlist1">EF_RISCV_TSO (0x0010)</dt>
<dd>
<p>This bit is set when the binary requires the RVTSO
memory consistency model.</p>
</dd>
<dt class="hdlist1">EF_RISCV_RV64ILP32 (0x0020)</dt>
<dd>
<p>This bit is set when the binary requires the
RV64ILP32* ABIs on RV64* ISAs.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
RV64ILP32* ABIs are experimental.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Until such a time that the <strong>Reserved</strong> bits (0x00ffffe0) are allocated by future
versions of this specification, they shall not be set by standard software.
Non-standard extensions are free to use bits 24-31 for any purpose. This may
conflict with other non-standard extensions.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
There is no provision for compatibility between conflicting uses of the
e_flags bits reserved for non-standard extensions, and many standard RISC-V
tools will ignore them. Do not use them unless you control both the toolchain
and the operating system, and the ABI differences are so significant they
cannot be done with a .RISCV.attributes tag nor an ELF note, such as using a
different syscall ABI.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>==== Policy for Merge Objects with Different File Headers</p>
</div>
<div class="paragraph">
<p>This section describe the behavior when the inputs files come with different
file headers.</p>
</div>
<div class="paragraph">
<p><code>e_ident</code> and <code>e_machine</code> should have exact same value otherwise linker should
raise an error.</p>
</div>
<div class="paragraph">
<p><code>e_flags</code> has different different policy for different fields:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">RVC</dt>
<dd>
<p>Input file could have different values for the RVC field; the linker
should set this field into EF_RISCV_RVC if any of the input objects has
been set.</p>
</dd>
<dt class="hdlist1">Float ABI</dt>
<dd>
<p>Linker should report errors if object files of different value
for float ABI field.</p>
</dd>
<dt class="hdlist1">RVE</dt>
<dd>
<p>Linker should report errors if object files of different value
for RVE field.</p>
</dd>
<dt class="hdlist1">TSO</dt>
<dd>
<p>Input files can have different values for the TSO field; the linker
should set this field if any of the input objects have the TSO field set.</p>
</dd>
<dt class="hdlist1">RV64ILP32</dt>
<dd>
<p>Linker should report errors if object files of different value
for RV64ILP32 field.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The static linker may ignore the compatibility checks if all fields in the
<code>e_flags</code> are zero and all sections in the input file are non-executable
sections.
</td>
</tr>
</table>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="string-tables"><a class="anchor" href="#string-tables"></a>String Tables</h3>
<div class="paragraph">
<p>There are no RISC-V specific definitions relating to ELF string tables.</p>
</div>
</div>
<div class="sect2">
<h3 id="symbol-table"><a class="anchor" href="#symbol-table"></a>Symbol Table</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">st_other</dt>
<dd>
<p>The lower 2 bits are used to specify a symbol&#8217;s visibility. The
remaining 6 bits have no defined meaning in the ELF gABI. We use the highest
bit to mark functions that do not follow the standard calling convention for
the ABI in use.</p>
<div class="paragraph">
<p>The defined processor-specific <code>st_other</code> flags are listed in <a href="#rv-st-other">RISC-V-specific <code>st_other</code> flags</a>.</p>
</div>
<table id="rv-st-other" class="tableblock frame-all grid-all" style="width: 60%;">
<caption class="title">Table 2. RISC-V-specific <code>st_other</code> flags</caption>
<colgroup>
<col style="width: 75%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Mask</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">STO_RISCV_VARIANT_CC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x80</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>See <a href="#dynamic-linking">Dynamic Linking</a> for the meaning of <code>STO_RISCV_VARIANT_CC</code>.</p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p><code>__global_pointer$</code> must be exported in the dynamic symbol table of dynamically-linked
executables if there are any GP-relative accesses present in the executable.</p>
</div>
</div>
<div class="sect2">
<h3 id="relocations"><a class="anchor" href="#relocations"></a>Relocations</h3>
<div class="paragraph">
<p>RISC-V is a classical RISC architecture that has densely packed non-word
sized instruction immediate values. While the linker can make relocations on
arbitrary memory locations, many of the RISC-V relocations are designed for
use with specific instructions or instruction sequences. RISC-V has several
instruction specific encodings for PC-Relative address loading, jumps,
branches and the RVC compressed instruction set.</p>
</div>
<div class="paragraph">
<p>The purpose of this section is to describe the RISC-V specific instruction
sequences with their associated relocations in addition to the general purpose
machine word sized relocations that are used for symbol addresses in the
Global Offset Table or DWARF meta data.</p>
</div>
<div class="paragraph">
<p><a href="#reloc-table">Relocation types</a> provides details of the RISC-V ELF relocations; the meaning of each
column is given below:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Enum</dt>
<dd>
<p>The number of the relocation, encoded in the r_info field</p>
</dd>
<dt class="hdlist1">ELF Reloc Type</dt>
<dd>
<p>The name of the relocation, omitting the prefix of <code>R_RISCV_</code>.</p>
</dd>
<dt class="hdlist1">Type</dt>
<dd>
<p>Whether the relocation is a static or dynamic relocation:</p>
<div class="ulist">
<ul>
<li>
<p>A static relocation relocates a location in a relocatable file, processed by a static linker.</p>
</li>
<li>
<p>A dynamic relocation relocates a location in an executable or shared object, processed by a run-time linker.</p>
</li>
<li>
<p><code>Both</code>: Some relocation types are used by both static relocations and dynamic relocations.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Field</dt>
<dd>
<p>Describes the set of bits affected by this relocation; see <a href="#field-symbols">Field Symbols</a> for the definitions of the individual types</p>
</dd>
<dt class="hdlist1">Calculation</dt>
<dd>
<p>Formula for how to resolve the relocation value; definitions of the
symbols can be found in <a href="#calculation-symbols">Calculation Symbols</a></p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>Additional information about the relocation</p>
</dd>
</dl>
</div>
<table id="reloc-table" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Relocation types</caption>
<colgroup>
<col style="width: 7.1428%;">
<col style="width: 21.4285%;">
<col style="width: 10.7142%;">
<col style="width: 21.4285%;">
<col style="width: 39.286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-right valign-top">Enum</th>
<th class="tableblock halign-left valign-top">ELF Reloc Type</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Field / Calculation</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">NONE</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">None</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top" rowspan="2"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>word32</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">32-bit relocation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S + A</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">64</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Both</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>word64</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">64-bit relocation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S + A</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">RELATIVE</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Dynamic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>wordclass</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Adjust a link address (A) to its load address (B + A)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">B + A</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">COPY</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Dynamic</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Must be in executable; not allowed in shared library</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">JUMP_SLOT</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Dynamic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>wordclass</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Indicates the symbol associated with a PLT entry</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">TLS_DTPMOD32</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Dynamic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>word32</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TLSMODULE</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">TLS_DTPMOD64</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Dynamic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>word64</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TLSMODULE</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">TLS_DTPREL32</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Dynamic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>word32</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S + A - TLS_DTV_OFFSET</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">TLS_DTPREL64</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Dynamic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>word64</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S + A - TLS_DTV_OFFSET</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">TLS_TPREL32</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Dynamic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>word32</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S + A + TLSOFFSET</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">TLS_TPREL64</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Dynamic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>word64</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S + A + TLSOFFSET</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">TLSDESC</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Dynamic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See <a href="#tls-descriptors">TLS Descriptors</a></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TLSDESC(S+A)</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">BRANCH</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>B-Type</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">12-bit PC-relative branch offset</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S + A - P</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">17</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">JAL</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>J-Type</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">20-bit PC-relative jump offset</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S + A - P</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">18</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">CALL</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>U+I-Type</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock"><strong>Deprecated, please use CALL_PLT instead</strong> 32-bit PC-relative function call, macros <code>call</code>, <code>tail</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S + A - P</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">19</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">CALL_PLT</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>U+I-Type</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">32-bit PC-relative function call, macros <code>call</code>, <code>tail</code> (PIC)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S + A - P</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">20</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">GOT_HI20</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>U-Type</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">High 20 bits of 32-bit PC-relative GOT access, <code>%got_pcrel_hi(symbol)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">G + GOT + A - P</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">21</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">TLS_GOT_HI20</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>U-Type</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">High 20 bits of 32-bit PC-relative TLS IE GOT access, macro <code>la.tls.ie</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">22</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">TLS_GD_HI20</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>U-Type</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">High 20 bits of 32-bit PC-relative TLS GD GOT reference, macro <code>la.tls.gd</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">23</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">PCREL_HI20</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>U-Type</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">High 20 bits of 32-bit PC-relative reference, <code>%pcrel_hi(symbol)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S + A - P</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">24</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">PCREL_LO12_I</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>I-type</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Low 12 bits of a 32-bit PC-relative, <code>%pcrel_lo(address of %pcrel_hi)</code>, the addend must be 0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S - P</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">25</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">PCREL_LO12_S</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>S-Type</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Low 12 bits of a 32-bit PC-relative, <code>%pcrel_lo(address of %pcrel_hi)</code>, the addend must be 0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S - P</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">26</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">HI20</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>U-Type</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">High 20 bits of 32-bit absolute address, <code>%hi(symbol)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S + A</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">27</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">LO12_I</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>I-Type</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Low 12 bits of 32-bit absolute address, <code>%lo(symbol)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S + A</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">28</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">LO12_S</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>S-Type</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Low 12 bits of 32-bit absolute address, <code>%lo(symbol)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S + A</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">29</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">TPREL_HI20</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>U-Type</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">High 20 bits of TLS LE thread pointer offset, <code>%tprel_hi(symbol)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">30</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">TPREL_LO12_I</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>I-Type</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Low 12 bits of TLS LE thread pointer offset, <code>%tprel_lo(symbol)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">31</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">TPREL_LO12_S</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>S-Type</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Low 12 bits of TLS LE thread pointer offset, <code>%tprel_lo(symbol)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">TPREL_ADD</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">TLS LE thread pointer usage, <code>%tprel_add(symbol)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">33</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">ADD8</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>word8</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">8-bit label addition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">V + S + A</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">34</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">ADD16</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>word16</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">16-bit label addition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">V + S + A</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">35</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">ADD32</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>word32</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">32-bit label addition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">V + S + A</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">36</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">ADD64</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>word64</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">64-bit label addition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">V + S + A</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">37</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">SUB8</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>word8</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">8-bit label subtraction</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">V - S - A</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">38</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">SUB16</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>word16</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">16-bit label subtraction</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">V - S - A</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">39</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">SUB32</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>word32</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">32-bit label subtraction</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">V - S - A</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">40</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">SUB64</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>word64</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">64-bit label subtraction</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">V - S - A</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">41</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">GOT32_PCREL</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>word32</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">32-bit difference between the GOT entry for a symbol and the current location</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">G + GOT + A - P</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">42</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock"><strong>Reserved</strong></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Reserved for future standard use</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">43</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">ALIGN</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Alignment statement. The addend indicates the number of bytes occupied by <code>nop</code> instructions at the relocation offset. The alignment boundary is specified by the addend rounded up to the next power of two.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">44</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">RVC_BRANCH</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>CB-Type</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">8-bit PC-relative branch offset</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S + A - P</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">45</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">RVC_JUMP</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>CJ-Type</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">11-bit PC-relative jump offset</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S + A - P</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">46-50</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock"><strong>Reserved</strong></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Reserved for future standard use</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">51</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">RELAX</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Instruction can be relaxed, paired with a normal relocation at the same address</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">52</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">SUB6</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>word6</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Local label subtraction</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">V - S - A</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">53</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">SET6</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>word6</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Local label assignment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S + A</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">54</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">SET8</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>word8</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Local label assignment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S + A</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">55</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">SET16</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>word16</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Local label assignment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S + A</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">56</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">SET32</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>word32</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Local label assignment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S + A</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">57</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">32_PCREL</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>word32</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">32-bit PC relative</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S + A - P</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">58</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">IRELATIVE</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Dynamic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>wordclass</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Relocation against a non-preemptible ifunc symbol</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ifunc_resolver(B + A)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">59</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">PLT32</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>word32</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">32-bit relative offset to a function or its PLT entry</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S + A - P</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">60</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">SET_ULEB128</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>ULEB128</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Must be placed immediately before a SUB_ULEB128 with the same offset. Local label assignment <a href="#uleb128-note">*note</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S + A</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">61</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">SUB_ULEB128</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>ULEB128</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Must be placed immediately after a SET_ULEB128 with the same offset. Local label subtraction <a href="#uleb128-note">*note</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">V - S - A</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">62</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">TLSDESC_HI20</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>U-Type</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">High 20 bits of a 32-bit PC-relative offset into a TLS descriptor entry, <code>%tlsdesc_hi(symbol)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S + A - P</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">63</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">TLSDESC_LOAD_LO12</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>I-Type</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Low 12 bits of a 32-bit PC-relative offset into a TLS descriptor entry, <code>%tlsdesc_load_lo(address of %tlsdesc_hi)</code>, the addend must be 0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S - P</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">64</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">TLSDESC_ADD_LO12</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>I-Type</em></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Low 12 bits of a 32-bit PC-relative offset into a TLS descriptor entry, <code>%tlsdesc_add_lo(address of %tlsdesc_hi)</code>, the addend must be 0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S - P</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">65</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">TLSDESC_CALL</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Annotate call to TLS descriptor resolver function, <code>%tlsdesc_call(address of %tlsdesc_hi)</code>, for relaxation purposes only</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">66-190</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock"><strong>Reserved</strong></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Reserved for future standard use</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">191</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">VENDOR</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Static</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Paired with a vendor-specific relocation and must be placed immediately before it, indicates which vendor owns the relocation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top" rowspan="2"><p class="tableblock">192-255</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock"><strong>Reserved</strong></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Reserved for nonstandard ABI extensions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This section and later ones contain fragments written in assembler. The precise
assembler syntax, including that of the relocations, is described in the
<em>RISC-V Assembly Programmer&#8217;s Manual</em> <a href="#rv-asm">[rv-asm]</a>.</p>
</div>
<div id="uleb128-note" class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The assembler must allocate sufficient space to accommodate the final
value for the <code>R_RISCV_SET_ULEB128</code> and <code>R_RISCV_SUB_ULEB128</code> relocation pair
and fill the space with a single ULEB128-encoded value.
This is achieved by prepending the redundant <code>0x80</code> byte as necessary.
The linker must not alter the length of the ULEB128-encoded value.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="nonstandard-relocations-a-k-a-vendor-specific-relocations"><a class="anchor" href="#nonstandard-relocations-a-k-a-vendor-specific-relocations"></a>Nonstandard Relocations (a.k.a. Vendor-Specific Relocations)</h4>
<div class="paragraph">
<p>Nonstandard extensions are free to use relocation numbers 192-255 for any
purpose. These vendor-specific relocations must be preceded by a
<code>R_RISCV_VENDOR</code> relocation against a vendor identifier symbol. The preceding
<code>R_RISCV_VENDOR</code> relocation is used by the linker to choose the correct
implementation for the associated nonstandard relocation.</p>
</div>
<div class="paragraph">
<p>The vendor identifier symbol should be a defined symbol and should set the type
to <code>STT_NOTYPE</code>, binding to <code>STB_LOCAL</code>, and the size of symbol to zero.</p>
</div>
<div class="paragraph">
<p>Vendor identifiers must be unique amongst all vendors providing custom
relocations. Vendor identifiers may be suffixed with a tag to provide extra
relocations for a given vendor.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Please refer to the <em>RISC-V Toolchain Conventions</em>
<a href="#rv-toolchain-conventions">[rv-toolchain-conventions]</a> for the full list of vendor identifiers.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Where possible, tools should present relocation as their vendor-specific
relocation types, otherwise a generic name of <code>R_RISCV_CUSTOM&lt;enum value&gt;</code> must
be shown.</p>
</div>
</div>
<div class="sect3">
<h4 id="calculation-symbols"><a class="anchor" href="#calculation-symbols"></a>Calculation Symbols</h4>
<div class="paragraph">
<p><a href="#var-reloc-calc">Variables used in relocation calculation</a> provides details on the variables used in relocation
calculation:</p>
</div>
<table id="var-reloc-calc" class="tableblock frame-all grid-all fit-content">
<caption class="title">Table 4. Variables used in relocation calculation</caption>
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Addend field in the relocation entry associated with the symbol</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Base address of a shared object loaded into memory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">G</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Offset of the symbol into the GOT (Global Offset Table)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GOT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Address of the GOT (Global Offset Table)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Position of the relocation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value of the symbol in the symbol table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">V</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value at the position of the relocation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value of <code>__global_pointer$</code> symbol</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TLSMODULE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TLS module index for the object containing the symbol</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TLSOFFSET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TLS static block offset (relative to <code>tp</code>) for the object containing the symbol</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Global Pointer</strong>: It is assumed that program startup code will load the value
of the <code>__global_pointer$</code> symbol into register <code>gp</code> (aka <code>x3</code>).</p>
</div>
</div>
<div class="sect3">
<h4 id="field-symbols"><a class="anchor" href="#field-symbols"></a>Field Symbols</h4>
<div class="paragraph">
<p><a href="#var-reloc-field">Variables used in relocation fields</a> provides details on the variables used in relocation fields:</p>
</div>
<table id="var-reloc-field" class="tableblock frame-all grid-all fit-content">
<caption class="title">Table 5. Variables used in relocation fields</caption>
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>word6</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the 6 least significant bits of a <em>word8</em> field</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>word8</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies an 8-bit word</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>word16</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies a 16-bit word</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>word32</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies a 32-bit word</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>word64</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies a 64-bit word</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>ULEB128</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies a variable-length data encoded in ULEB128 format.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>wordclass</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies a <em>word32</em> field for ILP32 or a <em>word64</em> field for LP64</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>B-Type</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies a field as the immediate field in a B-type instruction</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>CB-Type</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies a field as the immediate field in a CB-type instruction</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>CI-Type</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies a field as the immediate field in a CI-type instruction</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>CJ-Type</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies a field as the immediate field in a CJ-type instruction</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>I-Type</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies a field as the immediate field in an I-type instruction</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>S-Type</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies a field as the immediate field in an S-type instruction</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>U-Type</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies a field as the immediate field in an U-type instruction</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>J-Type</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies a field as the immediate field in a J-type instruction</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>U+I-Type</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies a field as the immediate fields in a U-type and I-type instruction pair</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="constants"><a class="anchor" href="#constants"></a>Constants</h4>
<div class="paragraph">
<p><a href="#const-reloc-field">Constants used in relocation fields</a> provides details on the constants used in relocation fields:</p>
</div>
<table id="const-reloc-field" class="tableblock frame-all grid-all" style="width: 30%;">
<caption class="title">Table 6. Constants used in relocation fields</caption>
<colgroup>
<col style="width: 75%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TLS_DTV_OFFSET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x800</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="absolute-addresses"><a class="anchor" href="#absolute-addresses"></a>Absolute Addresses</h4>
<div class="paragraph">
<p>32-bit absolute addresses in position dependent code are loaded with a pair
of instructions which have an associated pair of relocations:
<code>R_RISCV_HI20</code> plus <code>R_RISCV_LO12_I</code> or <code>R_RISCV_LO12_S</code>.</p>
</div>
<div class="paragraph">
<p>The <code>R_RISCV_HI20</code> refers to an <code>LUI</code> instruction containing the high
20-bits to be relocated to an absolute symbol address. The <code>LUI</code> instruction
is used in conjunction with one or more I-Type instructions (add immediate or
load) with <code>R_RISCV_LO12_I</code> relocations or S-Type instructions (store) with
<code>R_RISCV_LO12_S</code> relocations.
The addresses for pair of relocations are
calculated like this:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
HI20
</td>
<td class="hdlist2">
<p><code>(symbol_address + 0x800) &gt;&gt; 12</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
LO12
</td>
<td class="hdlist2">
<p><code>symbol_address</code></p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following assembly and relocations show loading an absolute address:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    lui  a0, %hi(symbol)     # R_RISCV_HI20 (symbol)
    addi a0, a0, %lo(symbol) # R_RISCV_LO12_I (symbol)</code></pre>
</div>
</div>
<div class="paragraph">
<p>A symbol can be loaded in multiple fragments using different addends, where
multiple instructions associated with <code>R_RISCV_LO12_I</code>/<code>R_RISCV_LO12_S</code> share a
single <code>R_RISCV_HI20</code>. The HI20 values for the multiple fragments must be
identical, a condition met when the symbol is sufficiently aligned.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    lui a0, 0       # R_RISCV_HI20 (symbol)
    lw a1, 0(a0)    # R_RISCV_LO12_I (symbol)
    lw a2, 0(a0)    # R_RISCV_LO12_I (symbol+4)
    lw a3, 0(a0)    # R_RISCV_LO12_I (symbol+8)
    lw a0, 0(a0)    # R_RISCV_LO12_I (symbol+12)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="global-offset-table"><a class="anchor" href="#global-offset-table"></a>Global Offset Table</h4>
<div class="paragraph">
<p>For position independent code in dynamically linked objects, each shared
object contains a GOT (Global Offset Table), which contains addresses of
global symbols (objects and functions) referred to by the dynamically
linked shared object. The GOT in each shared library is filled in by the
dynamic linker during program loading, or on the first call to extern functions.</p>
</div>
<div class="paragraph">
<p>To avoid dynamic relocations within the text segment of position independent
code the GOT is used for indirection. Instead of code loading virtual addresses
directly, as can be done in static code, addresses are loaded from the GOT.
This allows runtime binding to external objects and functions at the expense of
a slightly higher runtime overhead for access to extern objects and functions.</p>
</div>
</div>
<div class="sect3">
<h4 id="procedure-linkage-table"><a class="anchor" href="#procedure-linkage-table"></a>Procedure Linkage Table</h4>
<div class="paragraph">
<p>The PLT (Procedure Linkage Table) exists to allow function calls between
dynamically linked shared objects. Each dynamic object has its own
GOT (Global Offset Table) and PLT (Procedure Linkage Table).</p>
</div>
<div class="paragraph">
<p>The first entry of a shared object PLT is a special entry that calls
<code>_dl_runtime_resolve</code> to resolve the GOT offset for the called function.
The <code>_dl_runtime_resolve</code> function in the dynamic loader resolves the
GOT offsets lazily on the first call to any function, except when
<code>LD_BIND_NOW</code> is set in which case the GOT entries are populated by the
dynamic linker before the executable is started. Lazy resolution of GOT
entries is intended to speed up program loading by deferring symbol
resolution to the first time the function is called. The first entry
in the PLT occupies two 16 byte entries:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">1:  auipc  t2, %pcrel_hi(.got.plt)
    sub    t1, t1, t3               # shifted .got.plt offset + hdr size + 12
    l[w|d] t3, %pcrel_lo(1b)(t2)    # _dl_runtime_resolve
    addi   t1, t1, -(hdr size + 12) # shifted .got.plt offset
    addi   t0, t2, %pcrel_lo(1b)    # &amp;.got.plt
    srli   t1, t1, log2(16/PTRSIZE) # .got.plt offset
    l[w|d] t0, PTRSIZE(t0)          # link map
    jr     t3</code></pre>
</div>
</div>
<div class="paragraph">
<p>Subsequent function entry stubs in the PLT take up 16 bytes and load a
function pointer from the GOT. On the first call to a function, the
entry redirects to the first PLT entry which calls <code>_dl_runtime_resolve</code>
and fills in the GOT entry for subsequent calls to the function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">1:  auipc   t3, %pcrel_hi(function@.got.plt)
    l[w|d]  t3, %pcrel_lo(1b)(t3)
    jalr    t1, t3
    nop</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="procedure-calls"><a class="anchor" href="#procedure-calls"></a>Procedure Calls</h4>
<div class="paragraph">
<p><code>R_RISCV_CALL</code> and <code>R_RISCV_CALL_PLT</code> relocations are associated with
pairs of instructions (<code>AUIPC+JALR</code>) generated by the <code>CALL</code> or <code>TAIL</code>
pseudoinstructions.  Originally, these relocations had slightly different
behavior, but that has turned out to be unnecessary, and they are now
interchangeable,  <code>R_RISCV_CALL</code> is deprecated, suggest using <code>R_RISCV_CALL_PLT</code>
instead.</p>
</div>
<div class="paragraph">
<p>With linker relaxation enabled, the <code>AUIPC</code> instruction in the <code>AUIPC+JALR</code> pair has
both a <code>R_RISCV_CALL</code> or <code>R_RISCV_CALL_PLT</code> relocation and an <code>R_RISCV_RELAX</code>
relocation indicating the instruction sequence can be relaxed during linking.</p>
</div>
<div class="paragraph">
<p>Procedure call linker relaxation allows the <code>AUIPC+JALR</code> pair to be relaxed
to the <code>JAL</code> instruction when the procedure or PLT entry is within (-1MiB to
+1MiB-2) of the instruction pair.</p>
</div>
<div class="paragraph">
<p>The pseudoinstruction:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    call symbol
    call symbol@plt</code></pre>
</div>
</div>
<div class="paragraph">
<p>expands to the following assembly and relocation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    auipc ra, 0           # R_RISCV_CALL (symbol), R_RISCV_RELAX (symbol)
    jalr  ra, ra, 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>and when symbol has an <code>@plt</code> suffix it expands to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    auipc ra, 0           # R_RISCV_CALL_PLT (symbol), R_RISCV_RELAX (symbol)
    jalr  ra, ra, 0</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="pc-relative-jumps-and-branches"><a class="anchor" href="#pc-relative-jumps-and-branches"></a>PC-Relative Jumps and Branches</h4>
<div class="paragraph">
<p>Unconditional jump (J-Type) instructions have a <code>R_RISCV_JAL</code> relocation
that can represent an even signed 21-bit offset (-1MiB to +1MiB-2).</p>
</div>
<div class="paragraph">
<p>Branch (SB-Type) instructions have a <code>R_RISCV_BRANCH</code> relocation that
can represent an even signed 13-bit offset (-4096 to +4094).</p>
</div>
</div>
<div class="sect3">
<h4 id="pc-relative-symbol-addresses"><a class="anchor" href="#pc-relative-symbol-addresses"></a>PC-Relative Symbol Addresses</h4>
<div class="paragraph">
<p>32-bit PC-relative relocations for symbol addresses on sequences of
instructions such as the <code>AUIPC+ADDI</code> instruction pair expanded from
the <code>la</code> pseudoinstruction, in position independent code typically
have an associated pair of relocations: <code>R_RISCV_PCREL_HI20</code> plus
<code>R_RISCV_PCREL_LO12_I</code> or <code>R_RISCV_PCREL_LO12_S</code>.</p>
</div>
<div class="paragraph">
<p>The <code>R_RISCV_PCREL_HI20</code> relocation refers to an <code>AUIPC</code> instruction
containing the high 20-bits to be relocated to a symbol relative to the
program counter address of the <code>AUIPC</code> instruction. The <code>AUIPC</code>
instruction is used in conjunction with one or more I-Type instructions
(add immediate or load) with <code>R_RISCV_PCREL_LO12_I</code> relocations or S-Type
instructions (store) with <code>R_RISCV_PCREL_LO12_S</code> relocations.</p>
</div>
<div class="paragraph">
<p>The <code>R_RISCV_PCREL_LO12_I</code> or <code>R_RISCV_PCREL_LO12_S</code> relocations contain
a label pointing to an instruction in the same section with an
<code>R_RISCV_PCREL_HI20</code> relocation entry that points to the target symbol:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>At label: <code>R_RISCV_PCREL_HI20</code> relocation entry &#8594; symbol</p>
</li>
<li>
<p><code>R_RISCV_PCREL_LO12_I</code> relocation entry &#8594; label</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To get the symbol address to perform the calculation to fill the 12-bit
immediate on the add, load or store instruction the linker finds the
<code>R_RISCV_PCREL_HI20</code> relocation entry associated with the <code>AUIPC</code>
instruction. The addresses for pair of relocations are calculated like this:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
HI20
</td>
<td class="hdlist2">
<p><code>(symbol_address - hi20_reloc_offset + 0x800) &gt;&gt; 12</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
LO12
</td>
<td class="hdlist2">
<p><code>symbol_address - hi20_reloc_offset</code></p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The successive instruction has a signed 12-bit immediate so the value of the
preceding high 20-bit relocation may have 1 added to it.</p>
</div>
<div class="paragraph">
<p>Note the compiler emitted instructions for PC-relative symbol addresses are
not necessarily sequential or in pairs. There is a constraint is that the
instruction with the <code>R_RISCV_PCREL_LO12_I</code> or <code>R_RISCV_PCREL_LO12_S</code>
relocation label points to a valid HI20 PC-relative relocation pointing to
the symbol.</p>
</div>
<div class="paragraph">
<p>Here is example assembler showing the relocation types:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">label:
    auipc t0, %pcrel_hi(symbol)   # R_RISCV_PCREL_HI20 (symbol)
    lui t1, 1
    lw t2, t0, %pcrel_lo(label)   # R_RISCV_PCREL_LO12_I (label)
    add t2, t2, t1
    sw t2, t0, %pcrel_lo(label)   # R_RISCV_PCREL_LO12_S (label)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="relocation-for-alignment"><a class="anchor" href="#relocation-for-alignment"></a>Relocation for Alignment</h4>
<div class="paragraph">
<p>The relocation type <code>R_RISCV_ALIGN</code> marks a location that must be aligned to
<code>N</code>-bytes, where <code>N</code> is the smallest power of two that is greater than the value
of the addend field, e.g. <code>R_RISCV_ALIGN</code> with addend value 2 means align to 4
bytes, <code>R_RISCV_ALIGN</code> with addend value 4 means align to 8 bytes; this
relocation is only required if the containing section has any <code>R_RISCV_RELAX</code>
relocations, <code>R_RISCV_ALIGN</code> points to the beginning of the padding bytes,
and the instruction that actually needs to be aligned is located at the point
of <code>R_RISCV_ALIGN</code> plus its addend.</p>
</div>
<div class="paragraph">
<p>To ensure the linker can always satisfy the required alignment solely by
deleting bytes, the compiler or assembler must emit a <code>R_RISCV_ALIGN</code> relocation
and then insert <code>N</code> - <a href="#IALIGN">[IALIGN]</a> padding bytes before the location where we need to
align, it could be mark by an alignment directive like <code>.align</code>, <code>.p2align</code> or
<code>.balign</code> or emit by compiler directly, the addend value of that relocation
is the number of padding bytes.</p>
</div>
<div class="paragraph">
<p>The compiler and assembler must ensure padding bytes are valid instructions
without any side-effect like <code>nop</code> or <code>c.nop</code>, and make sure those instructions
are aligned to IALIGN if possible.</p>
</div>
<div class="paragraph">
<p>The linker may remove part of the padding bytes at the linking process to meet
the alignment requirement, and must make sure those padding bytes still are
valid instructions and each instruction is aligned to at least IALIGN byte.</p>
</div>
<div class="paragraph">
<p>Here is example to showing how <code>R_RISCV_ALIGN</code> is used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">0x0    c.nop           # R_RISCV_ALIGN with addend 2
0x2    add t1, t2, t3  # This instruction must align to 4 byte.</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>R_RISCV_ALIGN</code> relocation is needed because linker relaxation can shrink
preceding code during the linking process, which may cause an aligned location
to become mis-aligned.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
IALIGN<a id="IALIGN"></a> means the instruction-address alignment constraint. IALIGN is 4
bytes in the base ISA, but some ISA extensions, including the compressed ISA
extension, relax IALIGN to 2 bytes. IALIGN may not take on any value other than
4 or 2. This term is also defined in <code>The RISC-V Instruction Set Manual</code> with a
similar meaning, the only difference being it is specified in terms of the number
of bits instead of the number of bytes.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Here is pseudocode to decide the alignment of <code>R_RISCV_ALIGN</code> relocation:
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python"># input:
#   addend: addend value of relocation with R_RISCV_ALIGN type.
# output:
#   Alignment of this relocation.

def align(addend):
  ALIGN = 1
  while addend &gt;= ALIGN:
    ALIGN *= 2
  return ALIGN</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="thread-local-storage"><a class="anchor" href="#thread-local-storage"></a>Thread Local Storage</h3>
<div class="paragraph">
<p>RISC-V adopts the ELF Thread Local Storage Model in which ELF objects define
<code>.tbss</code> and <code>.tdata</code> sections and <code>PT_TLS</code> program headers that contain the
TLS "initialization images" for new threads. The <code>.tbss</code> and <code>.tdata</code> sections
are not referenced directly like regular segments, rather they are copied or
allocated to the thread local storage space of newly created threads.
See <em>ELF Handling For Thread-Local Storage</em> <a href="#tls">[tls]</a>.</p>
</div>
<div class="paragraph">
<p>In The ELF Thread Local Storage Model, TLS offsets are used instead of pointers.
The ELF TLS sections are initialization images for the thread local variables of
each new thread. A TLS offset defines an offset into the dynamic thread vector
which is pointed to by the TCB (Thread Control Block). RISC-V uses Variant I as
described by the ELF TLS specification, with <code>tp</code> containing the address one
past the end of the TCB.</p>
</div>
<div class="paragraph">
<p>There are various thread local storage models for statically allocated or
dynamically allocated thread local storage. <a href="#tls-model">TLS models</a> lists the
thread local storage models:</p>
</div>
<table id="tls-model" class="tableblock frame-all grid-all" style="width: 70%;">
<caption class="title">Table 7. TLS models</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Mnemonic</th>
<th class="tableblock halign-left valign-top">Model</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TLS LE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Local Exec</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TLS IE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial Exec</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TLS LD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Local Dynamic</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TLS GD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Global Dynamic</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The program linker in the case of static TLS or the dynamic linker in the case
of dynamic TLS allocate TLS offsets for storage of thread local variables.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>Global Dynamic</code> model is also known as <code>General Dynamic</code> model.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="local-exec"><a class="anchor" href="#local-exec"></a>Local Exec</h4>
<div class="paragraph">
<p>Local exec is a form of static thread local storage. This model is used
when static linking as the TLS offsets are resolved during program linking.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Variable attribute</dt>
<dd>
<p><code>__thread int i __attribute__((tls_model("local-exec")));</code></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Example assembler load and store of a thread local variable <code>i</code> using the
<code>%tprel_hi</code>, <code>%tprel_add</code> and <code>%tprel_lo</code> assembler functions. The emitted
relocations are in comments.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    lui  a5,%tprel_hi(i)           # R_RISCV_TPREL_HI20 (symbol)
    add  a5,a5,tp,%tprel_add(i)    # R_RISCV_TPREL_ADD (symbol)
    lw   t0,%tprel_lo(i)(a5)       # R_RISCV_TPREL_LO12_I (symbol)
    addi t0,t0,1
    sw   t0,%tprel_lo(i)(a5)       # R_RISCV_TPREL_LO12_S (symbol)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>%tprel_add</code> assembler function does not return a value and is used purely
to associate the <code>R_RISCV_TPREL_ADD</code> relocation with the <code>add</code> instruction.</p>
</div>
</div>
<div class="sect3">
<h4 id="initial-exec"><a class="anchor" href="#initial-exec"></a>Initial Exec</h4>
<div class="paragraph">
<p>Initial exec is is a form of static thread local storage that can be used in
shared libraries that use thread local storage. TLS relocations are performed
at load time. <code>dlopen</code> calls to libraries that use thread local storage may fail
when using the initial exec thread local storage model as TLS offsets must all
be resolved at load time. This model uses the GOT to resolve TLS offsets.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Variable attribute</dt>
<dd>
<p><code>__thread int i __attribute__((tls_model("initial-exec")));</code></p>
</dd>
<dt class="hdlist1">ELF flags</dt>
<dd>
<p>DF_STATIC_TLS</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Example assembler load and store of a thread local variable <code>i</code> using the
<code>la.tls.ie</code> pseudoinstruction, with the emitted TLS relocations in comments:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    la.tls.ie a5,i
    add  a5,a5,tp
    lw   t0,0(a5)
    addi t0,t0,1
    sw   t0,0(a5)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The assembler pseudoinstruction:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    la.tls.ie a5,symbol</code></pre>
</div>
</div>
<div class="paragraph">
<p>expands to the following assembly instructions and relocations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">label:
    auipc a5, 0                   # R_RISCV_TLS_GOT_HI20 (symbol)
    {ld,lw} a5, 0(a5)             # R_RISCV_PCREL_LO12_I (label)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="global-dynamic"><a class="anchor" href="#global-dynamic"></a>Global Dynamic</h4>
<div class="paragraph">
<p>RISC-V local dynamic and global dynamic TLS models generate equivalent object code.
The Global dynamic thread local storage model is used for PIC Shared libraries and
handles the case where more than one library uses thread local variables, and
additionally allows libraries to be loaded and unloaded at runtime using <code>dlopen</code>.
In the global dynamic model, application code calls the dynamic linker function
<code>__tls_get_addr</code> to locate TLS offsets into the dynamic thread vector at runtime.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Variable attribute</dt>
<dd>
<p><code>__thread int i __attribute__((tls_model("global-dynamic")));</code></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Example assembler load and store of a thread local variable <code>i</code> using the
<code>la.tls.gd</code> pseudoinstruction, with the emitted TLS relocations in comments:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    la.tls.gd a0,i
    call  __tls_get_addr@plt
    mv   a5,a0
    lw   t0,0(a5)
    addi t0,t0,1
    sw   t0,0(a5)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The assembler pseudoinstruction:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    la.tls.gd a0,symbol</code></pre>
</div>
</div>
<div class="paragraph">
<p>expands to the following assembly instructions and relocations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">label:
    auipc a0,0                    # R_RISCV_TLS_GD_HI20 (symbol)
    addi  a0,a0,0                 # R_RISCV_PCREL_LO12_I (label)</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the Global Dynamic model, the runtime library provides the <code>__tls_get_addr</code> function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">extern void *__tls_get_addr (tls_index *ti);</code></pre>
</div>
</div>
<div class="paragraph">
<p>where the type tls_index is defined as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">typedef struct
{
  unsigned long int ti_module;
  unsigned long int ti_offset;
} tls_index;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="tls-descriptors"><a class="anchor" href="#tls-descriptors"></a>TLS Descriptors</h4>
<div class="paragraph">
<p>TLS Descriptors (TLSDESC) are an alternative implementation of the Global Dynamic model
that allows the dynamic linker to achieve performance close to that
of Initial Exec when the library was not loaded dynamically with <code>dlopen</code>.</p>
</div>
<div class="paragraph">
<p>The linker reserves a consecutive pair of pointer-sized entry in the GOT for each <code>TLSDESC</code>
relocation. At runtime, the dynamic linker fills in the TLS descriptor entry as defined below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">typedef struct
{
  unsigned long (*entry)(tls_descriptor *);
  unsigned long arg;
} tls_descriptor;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Upon accessing the thread local variable, the <code>entry</code> function is called with the address
of <code>tls_descriptor</code> containing it, returning <code>&lt;address of thread local variable&gt; - tp</code>.</p>
</div>
<div class="paragraph">
<p>The TLS descriptor <code>entry</code> is called with a special calling convention, specified as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>a0</code> is used to pass the argument and return value.</p>
</li>
<li>
<p><code>t0</code> is used as the link register.</p>
</li>
<li>
<p>Any other registers are callee-saved. This includes any vector registers when the vector extension is supported.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example assembler load and store of a thread local variable <code>i</code> using the <code>%tlsdesc_hi</code>, <code>%tlsdesc_load_lo</code>, <code>%tlsdesc_add_lo</code> and <code>%tlsdesc_call</code>
assembler functions. The emitted relocations are in the comments.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">label:
	auipc tX, %tlsdesc_hi(symbol)         // R_RISCV_TLSDESC_HI20 (symbol)
	lw    tY, tX, %tlsdesc_load_lo(label) // R_RISCV_TLSDESC_LOAD_LO12 (label)
	addi  a0, tX, %tlsdesc_add_lo(label)  // R_RISCV_TLSDESC_ADD_LO12 (label)
	jalr  t0, tY, %tlsdesc_call(label)    // R_RISCV_TLSDESC_CALL (label)</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>tX</code> and <code>tY</code> in the example may be replaced with any combination of two general purpose registers.</p>
</div>
<div class="paragraph">
<p>The <code>%tlsdesc_call</code> assembler function does not return a value and is used purely
to associate the <code>R_RISCV_TLSDESC_CALL</code> relocation with the <code>jalr</code> instruction.</p>
</div>
<div class="paragraph">
<p>The linker can use the relocations to recognize the sequence and to perform relaxations. To ensure correctness, only the following changes to the sequence are allowed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Instructions outside the sequence that do not clobber the registers used within the sequence may be inserted in-between the instructions of the sequence (known as instruction scheduling).</p>
</li>
<li>
<p>Instructions in the sequence with no data dependency may be reordered. In the preceding example, the only instructions that can be reordered are <code>lw</code> and <code>addi</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sections"><a class="anchor" href="#sections"></a>Sections</h3>
<div class="sect3">
<h4 id="section-types"><a class="anchor" href="#section-types"></a>Section Types</h4>
<div class="paragraph">
<p>The defined processor-specific section types are listed in <a href="#rv-section-type">RISC-V-specific section types</a>.</p>
</div>
<table id="rv-section-type" class="tableblock frame-all grid-all" style="width: 80%;">
<caption class="title">Table 8. RISC-V-specific section types</caption>
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 42.8571%;">
<col style="width: 14.2858%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Attributes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHT_RISCV_ATTRIBUTES</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x70000003</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="special-sections"><a class="anchor" href="#special-sections"></a>Special Sections</h4>
<div class="paragraph">
<p><a href="#rv-section">RISC-V-specific sections</a> lists the special sections defined by this ABI.</p>
</div>
<table id="rv-section" class="tableblock frame-all grid-all" style="width: 80%;">
<caption class="title">Table 9. RISC-V-specific sections</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Attributes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.riscv.attributes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHT_RISCV_ATTRIBUTES</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.riscv.jvt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHT_PROGBITS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHF_ALLOC + SHF_EXECINSTR</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">.note.gnu.property</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHT_NOTE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SHF_ALLOC</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>.riscv.attributes names a section that contains RISC-V ELF attributes.</p>
</div>
<div class="paragraph">
<p>.riscv.jvt is a linker-created section to store table jump
target addresses. The minimum alignment of this section is 64 bytes.</p>
</div>
<div class="paragraph">
<p>.note.gnu.property names a section that contains a program property note.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="program-header-table"><a class="anchor" href="#program-header-table"></a>Program Header Table</h3>
<div class="paragraph">
<p>The defined processor-specific segment types are listed in <a href="#rv-seg-type">RISC-V-specific segment types</a>.</p>
</div>
<table id="rv-seg-type" class="tableblock frame-all grid-all" style="width: 80%;">
<caption class="title">Table 10. RISC-V-specific segment types</caption>
<colgroup>
<col style="width: 37.5%;">
<col style="width: 25%;">
<col style="width: 37.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PT_RISCV_ATTRIBUTES</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x70000003</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RISC-V ELF attribute section.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code>PT_RISCV_ATTRIBUTES</code> describes the location of RISC-V ELF attribute section.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<code>PT_RISCV_ATTRIBUTES</code> is deprecated. The build attributes section does
not contain the <code>SHF_ALLOC</code> flag. Dynamic loaders cannot assume that the region
described by <code>PT_RISCV_ATTRIBUTES</code> is present.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="note-sections"><a class="anchor" href="#note-sections"></a>Note Sections</h3>
<div class="paragraph">
<p>There are no RISC-V specific definitions relating to ELF note sections.</p>
</div>
</div>
<div class="sect2">
<h3 id="dynamic-section"><a class="anchor" href="#dynamic-section"></a>Dynamic Section</h3>
<div class="paragraph">
<p>The defined processor-specific dynamic array tags are listed in <a href="#rv-dyn-tag">RISC-V-specific dynamic array tags</a>.</p>
</div>
<table id="rv-dyn-tag" class="tableblock frame-all grid-all" style="width: 90%;">
<caption class="title">Table 11. RISC-V-specific dynamic array tags</caption>
<colgroup>
<col style="width: 30.7692%;">
<col style="width: 15.3846%;">
<col style="width: 7.6923%;">
<col style="width: 23.0769%;">
<col style="width: 23.077%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">d_un</th>
<th class="tableblock halign-left valign-top">Executable</th>
<th class="tableblock halign-left valign-top">Shared Object</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DT_RISCV_VARIANT_CC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0x70000001</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">d_val</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Platform specific</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Platform specific</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>An object must have the dynamic tag <code>DT_RISCV_VARIANT_CC</code> if it has one or more
<code>R_RISCV_JUMP_SLOT</code> relocations against symbols with the <code>STO_RISCV_VARIANT_CC</code>
attribute.</p>
</div>
<div class="paragraph">
<p><code>DT_INIT</code> and <code>DT_FINI</code> are not required to be supported and should be avoided
in favour of <code>DT_PREINIT_ARRAY</code>, <code>DT_INIT_ARRAY</code> and <code>DT_FINI_ARRAY</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="hash-table"><a class="anchor" href="#hash-table"></a>Hash Table</h3>
<div class="paragraph">
<p>There are no RISC-V specific definitions relating to ELF hash tables.</p>
</div>
</div>
<div class="sect2">
<h3 id="attributes"><a class="anchor" href="#attributes"></a>Attributes</h3>
<div class="paragraph">
<p>Attributes are used to record information about an object file/binary that a
linker or runtime loader needs to check compatibility.</p>
</div>
<div class="paragraph">
<p>Attributes are encoded in a vendor-specific section of type SHT_RISCV_ATTRIBUTES
and name .riscv.attributes. The value of an attribute can hold an integer
encoded in the uleb128 format or a null-terminated byte string (NTBS).
The tag number is also encoded as uleb128.</p>
</div>
<div class="paragraph">
<p>In order to improve the compatibility of the tool, the attribute follows below rules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>RISC-V attributes have a string value if the tag number is odd and an integer
value if the tag number is even.</p>
</li>
<li>
<p>The tag is mandatory;  If the tool does not recognize this attribute and the tag number
modulo 128 is less than 64 (<code>(N % 128) &lt; 64</code>), errors should be reported.</p>
</li>
<li>
<p>The tag is optional; If the tool does not recognize this attribute and the tag number
modulo 128 is greater than or equal to 64 (<code>(N % 128) &gt;= 64</code>), the tag can be ignored.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="layout-of-riscv-attributes-section"><a class="anchor" href="#layout-of-riscv-attributes-section"></a>Layout of .riscv.attributes Section</h4>
<div class="paragraph">
<p>The attributes section start with a format-version (uint8 = 'A') followed by
vendor specific sub-section(s). A sub-section starts with sub-section length
(uint32), vendor name (NTBS) and one or more sub-sub-section(s).</p>
</div>
<div class="paragraph">
<p>A sub-sub-section consists of a tag (uleb128), sub-sub-section length (uint32)
followed by actual attribute tag,value pair(s) as specified above.
Sub-sub-section Tag Tag_file (value 1) specifies that contained attibutes
relate to whole file.</p>
</div>
<div class="paragraph">
<p>A sub-section with name "riscv\0" is mandatory. Vendor specific sub-sections
are allowed in future. Vendor names starting with "[Aa]non" are reserved for
non-standard ABI extensions.</p>
</div>
</div>
<div class="sect3">
<h4 id="list-of-attributes"><a class="anchor" href="#list-of-attributes"></a>List of Attributes</h4>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 12. RISC-V attributes</caption>
<colgroup>
<col style="width: 30.7692%;">
<col style="width: 15.3846%;">
<col style="width: 15.3846%;">
<col style="width: 38.4616%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Tag</th>
<th class="tableblock halign-right valign-top">Value</th>
<th class="tableblock halign-left valign-top">Parameter type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tag_RISCV_stack_align</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uleb128</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the stack alignment requirement in bytes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tag_RISCV_arch</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NTBS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the target architecture of this object.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tag_RISCV_unaligned_access</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uleb128</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates whether to impose unaligned memory accesses in code generation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tag_RISCV_priv_spec</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uleb128</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Deprecated</strong>, indicates the major version of the privileged specification.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tag_RISCV_priv_spec_minor</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uleb128</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Deprecated</strong>, indicates the minor version of the privileged specification.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tag_RISCV_priv_spec_revision</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uleb128</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Deprecated</strong>, indicates the revision version of the privileged specification.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tag_RISCV_atomic_abi</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uleb128</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates which version of the atomics ABI is being used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tag_RISCV_x3_reg_usage</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uleb128</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the usage definition of the X3 register.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reserved for non-standard attribute</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">&gt;= 32768</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="detailed-attribute-description"><a class="anchor" href="#detailed-attribute-description"></a>Detailed Attribute Description</h4>
<div class="sect4">
<h5 id="how-does-this-specification-describe-public-attributes"><a class="anchor" href="#how-does-this-specification-describe-public-attributes"></a>How does this specification describe public attributes?</h5>
<div class="paragraph">
<p>Each attribute is described in the following structure:
<code>&lt;Tag name&gt;, &lt;Value&gt;, &lt;Parameter type 1&gt;=&lt;Parameter name 1&gt;[, &lt;Parameter type 2&gt;=&lt;Parameter name 2&gt;]</code></p>
</div>
</div>
<div class="sect4">
<h5 id="tag_riscv_stack_align-4-uleb128value"><a class="anchor" href="#tag_riscv_stack_align-4-uleb128value"></a>Tag_RISCV_stack_align, 4, uleb128=value</h5>
<div class="paragraph">
<p>Tag_RISCV_stack_align records the N-byte stack alignment for this object. The
default value is 16 for RV32I or RV64I, and 4 for RV32E.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Merge Policy</dt>
<dd>
<p>The linker should report erros if link object files with different <code>Tag_RISCV_stack_align</code> values.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="tag_riscv_arch-5-ntbssubarch"><a class="anchor" href="#tag_riscv_arch-5-ntbssubarch"></a>Tag_RISCV_arch, 5, NTBS=subarch</h5>
<div class="paragraph">
<p>Tag_RISCV_arch contains a string for the target architecture taken from
the option <code>-march</code>. Different architectures will be integrated into a superset
when object files are merged.</p>
</div>
<div class="paragraph">
<p>Tag_RISCV_arch should be recorded in lowercase, and all extensions should be
separated by underline(<code>_</code>).</p>
</div>
<div class="paragraph">
<p>Note that the version information for target architecture must be presented
explicitly in the attribute and abbreviations must be expanded. The version
information, if not given by <code>-march</code>, must agree with the default
specified by the tool. For example, the architecture <code>rv32i</code> has to be recorded
in the attribute as <code>rv32i2p1</code> in which <code>2p1</code> stands for the default version of
its based ISA. On the other hand, the architecture <code>rv32g</code> has to be presented
as <code>rv32i2p1_m2p0_a2p1_f2p2_d2p2_zicsr2p0_zifencei2p0</code> in which the
abbreviation <code>g</code> is expanded to the <code>imafd_zicsr_zifencei</code> combination with
default versions of the standard extensions.</p>
</div>
<div class="paragraph">
<p>The toolchain should normalize the architecture string by expanding all
required extensions and placing them in canonical order which is defined in
<em>The RISC-V Instruction Set Manual, Volume I: User-Level ISA, Document</em> <a href="#riscv-unpriv">[riscv-unpriv]</a>
. Shorthand extensions should be expanded into the architecture string if all
expanded extensions are included in the architecture string.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A shorthand extension is an extension that does not define any actual
instructions, registers or behavior, but requires other extensions, such as the
<code>zks</code> cryptography extension.
<code>zks</code> extension is shorthand for <code>zbkb</code>, <code>zbkc</code>, <code>zbkx</code>, <code>zksed</code> and <code>zksh</code>, so
the toolchain should normalize <code>rv32i_zbkb_zbkc_zbkx_zksed_zksh</code> to
<code>rv32i_zbkb_zbkc_zbkx_zks_zksed_zksh</code>; <code>g</code> is an exception and does not follow
this rule.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Merge Policy</dt>
<dd>
<p>The linker should merge the different architectures into a superset when
object files are merged, and should report errors if the merge result contains
conflict extensions.</p>
<div class="paragraph">
<p>This specification does not mandate rules on how to merge ISA strings that
refer to different versions of the same ISA extension.
The suggested merge rules are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Merge versions into the latest version of all input versions that are
ratified without warning or error.</p>
</li>
<li>
<p>The linker should emit a warning or error if input versions have different
versions and any extension versions are not ratified.</p>
</li>
<li>
<p>The linker may report a warning or error if it detects incompatible
versions, even if it&#8217;s ratified.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Example of conflicting merge result: <code>RV32IF</code> and <code>RV32IZfinx</code> will
be merged into <code>RV32IFZfinx</code>, which is an invalid architecture since <code>F</code> and
<code>Zfinx</code> conflict.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="tag_riscv_unaligned_access-6-uleb128value"><a class="anchor" href="#tag_riscv_unaligned_access-6-uleb128value"></a>Tag_RISCV_unaligned_access, 6, uleb128=value</h5>
<div class="paragraph">
<p>Tag_RISCV_unaligned_access denotes the code generation policy for this object
file. Its values are defined as follows:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
0
</td>
<td class="hdlist2">
<p>This object does not perform any unaligned memory accesses.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
1
</td>
<td class="hdlist2">
<p>This object may perform unaligned memory accesses.</p>
</td>
</tr>
</table>
</div>
<div class="openblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">Merge policy</dt>
<dd>
<p>Input file could have different values for the Tag_RISCV_unaligned_access;
the linker should set this field into 1 if any of the input objects has
been set.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="tag_riscv_priv_spec-8-uleb128version"><a class="anchor" href="#tag_riscv_priv_spec-8-uleb128version"></a>Tag_RISCV_priv_spec, 8, uleb128=version</h5>

</div>
<div class="sect4">
<h5 id="tag_riscv_priv_spec_minor-10-uleb128version"><a class="anchor" href="#tag_riscv_priv_spec_minor-10-uleb128version"></a>Tag_RISCV_priv_spec_minor, 10, uleb128=version</h5>

</div>
<div class="sect4">
<h5 id="tag_riscv_priv_spec_revision-12-uleb128version"><a class="anchor" href="#tag_riscv_priv_spec_revision-12-uleb128version"></a>Tag_RISCV_priv_spec_revision, 12, uleb128=version</h5>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Those three attributes are deprecated since RISC-V using extensions
with version rather than a single privileged specification version scheme for
privileged ISA.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Tag_RISCV_priv_spec contains the major/minor/revision version information of
the privileged specification.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Merge policy</dt>
<dd>
<p>The linker should report errors if object files of different privileged
specification versions are merged.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="tag_riscv_atomic_abi-14-uleb128version"><a class="anchor" href="#tag_riscv_atomic_abi-14-uleb128version"></a>Tag_RISCV_atomic_abi, 14, uleb128=version</h5>
<div class="paragraph">
<p>Tag_RISCV_atomic_abi denotes the atomic ABI used within this object
file. Its values are defined as follows:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 12.5%;">
<col style="width: 25%;">
<col style="width: 62.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Symbolic Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UNKNOWN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This object uses unknown atomic ABI.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A6C</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This object uses the A6 classical atomic ABI, which is defined in table A.6 in <a href="#riscv-unpriv-20191213">[riscv-unpriv-20191213]</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A6S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This object uses the strengthened A6 ABI, which uses the atomic mapping defined by <a href="#Mappings from C/C&#43;&#43; primitives to RISC-V primitives">[Mappings from C/C&#43;&#43; primitives to RISC-V primitives]</a> and does not rely on any note 3 annotated mappings.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This object uses the A7 atomic ABI, which uses the atomic mapping defined by <a href="#Mappings from C/C&#43;&#43; primitives to RISC-V primitives">[Mappings from C/C&#43;&#43; primitives to RISC-V primitives]</a> and may rely on note 3 annotated mappings.</p></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Merge policy</dt>
<dd>
<p>The linker should report errors if object files with incompatible atomics ABIs
are merged; the compatibility rules for atomic ABIs can be found in the
compatibility column in the following table.</p>
</dd>
</dl>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 54.5454%;">
<col style="width: 18.1818%;">
<col style="width: 27.2728%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Input Values</th>
<th class="tableblock halign-left valign-top">Compatible?</th>
<th class="tableblock halign-left valign-top">Ouput Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">UNKNOWN and A6C</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A6C</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">UNKNOWN and A6S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A6S</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">UNKNOWN and A7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">A6C and A6S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A6C</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">A6C and A7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">A6S and A7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A7</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Merging object files with the same ABI will result in the same ABI.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Programs that implement atomic operations without relying on the
A-extension are classified as UNKNOWN for now. A new value for those
may be defined in the future.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="tag_riscv_x3_reg_usage-16-uleb128value"><a class="anchor" href="#tag_riscv_x3_reg_usage-16-uleb128value"></a>Tag_RISCV_x3_reg_usage, 16, uleb128=value</h5>
<div class="paragraph">
<p>Tag_RISCV_x3_reg_usage indicates the usage of <code>x3</code>/<code>gp</code> register. <code>x3</code>/<code>gp</code> could be used for
global pointer relaxation, as a reserved platform register, or as a temporary register.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
0
</td>
<td class="hdlist2">
<p>This object uses <code>x3</code> as a fixed register with unknown purpose.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
1
</td>
<td class="hdlist2">
<p>This object uses <code>x3</code> as the global pointer, for relaxation purposes.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
2
</td>
<td class="hdlist2">
<p>This object uses <code>x3</code> as the shadow stack pointer.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
3
</td>
<td class="hdlist2">
<p>This object uses <code>X3</code> as a temporary register.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
4~1023
</td>
<td class="hdlist2">
<p>Reserved for future standard defined platform register.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
1024~2047
</td>
<td class="hdlist2">
<p>Reserved for nonstandard defined platform register.</p>
</td>
</tr>
</table>
</div>
<div class="openblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">Merge policy</dt>
<dd>
<p>The linker should issue errors when object files with differing <code>gp</code> usage are
combined. However, an exception exists: the value <code>0</code> can merge with <code>1</code> or <code>2</code>
value. After the merge, the resulting value will be the non-zero one.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="program-property"><a class="anchor" href="#program-property"></a>Program Property</h3>
<div class="paragraph">
<p>Program properties are used to record information about an object file or binary
that a linker or runtime loader needs to check for compatibility.</p>
</div>
<div class="paragraph">
<p>The linker should ignore and discard unknown bits in program properties, and
issue warnings or errors.</p>
</div>
</div>
<div class="sect2">
<h3 id="mapping-symbol"><a class="anchor" href="#mapping-symbol"></a>Mapping Symbol</h3>
<div class="paragraph">
<p>The section can have a mixture of code and data or code with different ISAs.
A number of symbols, named mapping symbols, describe the boundaries.</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Symbol Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Meaning</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$d</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Start of a sequence of data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$d.&lt;any&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$x</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Start of a sequence of instructions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$x.&lt;any&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$x&lt;ISA&gt;</p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">Start of a sequence of instructions with &lt;ISA&gt; extension.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">$x&lt;ISA&gt;.&lt;any&gt;</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The mapping symbol should set the type to <code>STT_NOTYPE</code>, binding to <code>STB_LOCAL</code>,
and the size of symbol to zero.</p>
</div>
<div class="paragraph">
<p>The mapping symbol for data(<code>$d</code>) indicates the start of a sequence of data
bytes.</p>
</div>
<div class="paragraph">
<p>The mapping symbol for instruction(<code>$x</code>) indicates the start of a sequence of
instructions. It has an optional ISA string that indicates the following code
regions are using ISA which is different from the ISA recorded in the arch
attribute. The optional ISA information, when present, will be used until the
next instruction mapping symbol. An instruction mapping symbol without ISA
string means using ISA configuration from ELF attribute. The format and rules
of the optional ISA string are same as <code>Tag_RISCV_arch</code> and must have explicit
version. For more detailed rules, please refer to <a href="#attributes">Attributes</a>.</p>
</div>
<div class="paragraph">
<p>The mapping symbol can be followed by an optional uniquifier, which is prefixed
with a dot (<code>.</code>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The use case for mapping symbol for instruction(<code>$x</code>) with ISA information
is used with <code>IFUNC</code>. Consider a scenario where C library is built with <code>rv64gc</code>
but few functions like memcpy may provide two versions, one built with <code>rv64gc</code>
and another built with <code>rv64gcv</code>, and the <code>IFUNC</code> mechanism selects one version
of those at run-time. However, the arch attribute is recorded for the minimal
execution environment requirements, so the ISA information from arch attribute
is not enough for the disassembler to disassemble the <code>rv64gcv</code> version
correctly. Specifying ISA string appropriately with the two memcpy instruction
mapping symbols helps the disassembler to disassemble instructions correctly.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="linker-relaxation"><a class="anchor" href="#linker-relaxation"></a>Linker Relaxation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>At link time, when all the memory objects have been resolved, the code sequence
used to refer to them may be simplified and optimized by the linker by relaxing
some assumptions about the memory layout made at compile time.</p>
</div>
<div class="paragraph">
<p>Some relocation types, in certain situations, indicate to the linker where this
can happen.  Additionally, some relocation types indicate to the
linker the associated parts of a code sequence that can be thusly simplified,
rather than to instruct the linker how to apply a relocation.</p>
</div>
<div class="paragraph">
<p>The linker should only perform such relaxations when a R_RISCV_RELAX relocation
is at the same position as a candidate relocation.</p>
</div>
<div class="paragraph">
<p>As this transformation may delete bytes (and thus invalidate references that
are commonly resolved at compile-time, such as intra-function jumps), code
generators must in general ensure that relocations are always emitted when
relaxation is enabled.</p>
</div>
<div class="paragraph">
<p>Linkers should adjust relocations that refer to symbols whose addresses have
been updated.</p>
</div>
<div class="paragraph">
<p>ULEB128 value with relocation must be padding to the same length even if the
data can be encoded with a shorter byte sequence after linker relaxation, The
linker should report errors if the length of ULEB128 byte sequence is more
extended than the current byte sequence.</p>
</div>
<div class="sect2">
<h3 id="linker-relaxation-types"><a class="anchor" href="#linker-relaxation-types"></a>Linker Relaxation Types</h3>
<div class="paragraph">
<p>The purpose of this section is to describe all types of linker relaxation,
the linker may implement a part of linker relaxation type, and can be skipped
the relaxation type is unsupported.</p>
</div>
<div class="paragraph">
<p>Each candidate relocation might fit more than one relaxation type, the linker
should only apply one relaxation type.</p>
</div>
<div class="paragraph">
<p>In the linker relaxation optimization, we introduce a concept called relocation
group; a relocation group consists of 1) relocations associated with the same
target symbol and can be applied with the same relaxation, or 2) relocations
with the linkage relationship (e.g. <code>R_RISCV_PCREL_LO12_S</code> linked with
a <code>R_RISCV_PCREL_HI20</code>); all relocations in a single group must be present in
the same section, otherwise will split into another relocation group.</p>
</div>
<div class="paragraph">
<p>Every relocation group must apply the same relaxation type, and the linker
should not apply linker relaxation to only part of the relocation group.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Applying relaxation on the part of the relocation group might result in a
wrong execution result; for example, a relocation group consists of
<code>lui t0, 0 # R_RISCV_HI20 (foo)</code>, <code>lw t1, 0(t0) # R_RISCV_LO12_I (foo)</code>, and we
only apply <a href="#gp-relax">global pointer relaxation</a> on first instruction, then
remove that instruction, and didn&#8217;t apply relaxation on the second instruction,
which made the load instruction reference to an unspecified address.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="function-call-relaxation"><a class="anchor" href="#function-call-relaxation"></a>Function Call Relaxation</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Target Relocation</dt>
<dd>
<p>R_RISCV_CALL, R_RISCV_CALL_PLT.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>This relaxation type can relax <code>AUIPC+JALR</code> into <code>JAL</code>.</p>
</dd>
<dt class="hdlist1">Condition</dt>
<dd>
<p>The offset between the location of relocation and target symbol or
the PLT stub of the target symbol is within +-1MiB.</p>
</dd>
<dt class="hdlist1">Relaxation</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Instruction sequence associated with <code>R_RISCV_CALL</code> or <code>R_RISCV_CALL_PLT</code>
can be rewritten to a single JAL instruction with the offset between the
location of relocation and target symbol.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Relaxation candidate:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    auipc ra, 0           # R_RISCV_CALL_PLT (symbol), R_RISCV_RELAX
    jalr  ra, ra, 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Relaxation result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    jal  ra, 0            # R_RISCV_JAL (symbol)</code></pre>
</div>
</div>
</div>
</div>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Using address of PLT stubs of the target symbol or address target symbol
directly will resolve by linker according to the visibility of the target
symbol.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="compress-func-call-relax"><a class="anchor" href="#compress-func-call-relax"></a>Compressed Function Call Relaxation</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Target Relocation</dt>
<dd>
<p>R_RISCV_CALL, R_RISCV_CALL_PLT.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>This relaxation type can relax <code>AUIPC+JALR</code> into <code>C.JAL</code>
instruction sequence.</p>
</dd>
<dt class="hdlist1">Condition</dt>
<dd>
<p>The offset between the location of relocation and target symbol or
the PLT stub of the target symbol is within +-2KiB and rd operand of second
instruction in the instruction sequence is <code>X1</code>/<code>RA</code> and if it is RV32.</p>
</dd>
<dt class="hdlist1">Relaxation</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Instruction sequence associated with <code>R_RISCV_CALL</code> or <code>R_RISCV_CALL_PLT</code>
can be rewritten to a single <code>C.JAL</code> instruction with the offset between the
location of relocation and target symbol.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Relaxation candidate:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    auipc ra, 0           # R_RISCV_CALL_PLT (symbol), R_RISCV_RELAX
    jalr  ra, ra, 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Relaxation result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    c.jal  ra, &lt;offset-between-pc-and-symbol&gt;</code></pre>
</div>
</div>
</div>
</div>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="compress-tailcall-relax"><a class="anchor" href="#compress-tailcall-relax"></a>Compressed Tail Call Relaxation</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Target Relocation</dt>
<dd>
<p>R_RISCV_CALL, R_RISCV_CALL_PLT.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>This relaxation type can relax <code>AUIPC+JALR</code> into <code>C.J</code>
instruction sequence.</p>
</dd>
<dt class="hdlist1">Condition</dt>
<dd>
<p>The offset between the location of relocation and target symbol or
the PLT stub of the target symbol is within +-2KiB and rd operand of second
instruction in the instruction sequence is <code>X0</code>.</p>
</dd>
<dt class="hdlist1">Relaxation</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Instruction sequence associated with <code>R_RISCV_CALL</code> or <code>R_RISCV_CALL_PLT</code>
can be rewritten to a single <code>C.J</code> instruction with the offset between the
location of relocation and target symbol.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Relaxation candidate:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    auipc ra, 0           # R_RISCV_CALL_PLT (symbol), R_RISCV_RELAX
    jalr  x0, ra, 0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Relaxation result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    c.j  ra, &lt;offset-between-pc-and-symbol&gt;</code></pre>
</div>
</div>
</div>
</div>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="gp-relax"><a class="anchor" href="#gp-relax"></a>Global-Pointer Relaxation</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Target Relocation</dt>
<dd>
<p>R_RISCV_HI20, R_RISCV_LO12_I, R_RISCV_LO12_S,
R_RISCV_PCREL_HI20, R_RISCV_PCREL_LO12_I, R_RISCV_PCREL_LO12_S</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>This relaxation type can relax a sequence of the
load address of a symbol or load/store with a symbol reference into
global-pointer-relative instruction.</p>
</dd>
<dt class="hdlist1">Condition</dt>
<dd>
<p>Global-pointer relaxation requires that Tag_RISCV_x3_reg_usage
must be 0 or 1, and offset between global-pointer and symbol is within +-2KiB,
<code>R_RISCV_PCREL_LO12_I</code> and <code>R_RISCV_PCREL_LO12_S</code> resolved as indirect
relocation pointer. It will always point to another <code>R_RISCV_PCREL_HI20</code>
relocation, the symbol pointed by <code>R_RISCV_PCREL_HI20</code> will be used in
the offset calculation.</p>
</dd>
<dt class="hdlist1">Relaxation</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Instruction associated with <code>R_RISCV_HI20</code> or <code>R_RISCV_PCREL_HI20</code> can
be removed.</p>
</li>
<li>
<p>Instruction associated with <code>R_RISCV_LO12_I</code>, <code>R_RISCV_LO12_S</code>,
<code>R_RISCV_PCREL_LO12_I</code> or <code>R_RISCV_PCREL_LO12_S</code> can be replaced with a
global-pointer-relative access instruction.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Relaxation candidate (<code>tX</code> and <code>tY</code> can be any combination of two general purpose registers):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    lui tX, 0       # R_RISCV_HI20 (symbol), R_RISCV_RELAX
    lw tY, 0(tX)    # R_RISCV_LO12_I (symbol), R_RISCV_RELAX</code></pre>
</div>
</div>
<div class="paragraph">
<p>Relaxation result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    lw tY, &lt;gp-offset-for-symbol&gt;(gp)</code></pre>
</div>
</div>
<div class="paragraph">
<p>A symbol can be loaded in multiple fragments using different addends, where
multiple instructions associated with <code>R_RISCV_LO12_I</code>/<code>R_RISCV_LO12_S</code> share a
single <code>R_RISCV_HI20</code>. The HI20 values for the multiple fragments must be
identical and all the relaxed global-pointer offsets must be in range.</p>
</div>
<div class="paragraph">
<p>Relaxation candidate:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    lui tX, 0       # R_RISCV_HI20 (symbol), R_RISCV_RELAX
    lw tY, 0(tX)    # R_RISCV_LO12_I (symbol), R_RISCV_RELAX
    lw tZ, 0(tX+4)  # R_RISCV_LO12_I (symbol+4), R_RISCV_RELAX
    lw tW, 0(tX+8)  # R_RISCV_LO12_I (symbol+8), R_RISCV_RELAX
    lw tX, 0(tX+12) # R_RISCV_LO12_I (symbol+12), R_RISCV_RELAX</code></pre>
</div>
</div>
<div class="paragraph">
<p>Relaxation result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    lw tY, &lt;gp-offset-for-symbol&gt;(gp)
    lw tZ, &lt;gp-offset-for-symbol+4&gt;(gp)
    lw tW, &lt;gp-offset-for-symbol+8&gt;(gp)
    lw tX, &lt;gp-offset-for-symbol+12&gt;(gp)</code></pre>
</div>
</div>
</div>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The global-pointer refers to the address of the <code>__global_pointer$</code>
symbol, which is the content of <code>gp</code> register.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This relaxation requires the program to initialize the <code>gp</code> register with
the address of <code>__global_pointer$</code> symbol before accessing any symbol address,
strongly recommended initialize <code>gp</code> at the beginning of the program entry
function like <code>_start</code>, and code fragments of initialization must disable
linker relaxation to prevent initialization instruction relaxed into a NOP-like
instruction (e.g. <code>mv gp, gp</code>).
</td>
</tr>
</table>
</div>
<div id="gp-relax-asm" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    # Recommended way to initialize the gp register.
    .option push
    .option norelax
1:  auipc gp, %pcrel_hi(__global_pointer$)
    addi  gp, gp, %pcrel_lo(1b)
    .option pop</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The global pointer is referred to as the global offset table pointer in
many other targets, however, RISC-V uses PC-relative addressing rather than
access GOT via the global pointer register (<code>gp</code>), so we use <code>gp</code> register to
optimize code size and performance of the symbol accessing.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Tag_RISCV_x3_reg_usage is treated as 0 if it is not present.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="got-load-relaxation"><a class="anchor" href="#got-load-relaxation"></a>GOT Load Relaxation</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Target Relocation</dt>
<dd>
<p>R_RISCV_GOT_HI20, R_RISCV_PCREL_LO12_I</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>This relaxation can relax a GOT indirection into load
immediate or PC-relative addressing. This relaxation is intended to
optimize the <code>lga</code> assembly pseudo-instruction (and thus <code>la</code> for
PIC objects), which loads a symbol&#8217;s address from a GOT entry with
an <code>auipc</code> + <code>l[w|d]</code> instruction pair.</p>
</dd>
<dt class="hdlist1">Condition</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Both <code>R_RISCV_GOT_HI20</code> and <code>R_RISCV_PCREL_LO12_I</code> are marked with
<code>R_RISCV_RELAX</code>.</p>
</li>
<li>
<p>The symbol pointed to by <code>R_RISCV_PCREL_LO12_I</code> is at the location to
which <code>R_RISCV_GOT_HI20</code> refers.</p>
</li>
<li>
<p>If the symbol is absolute, its address is within <code>0x0</code> ~ <code>0x7ff</code> or
<code>0xfffffffffffff800</code> ~ <code>0xffffffffffffffff</code> for RV64 and
<code>0xfffff800</code> ~ <code>0xffffffff</code> for RV32.
Note that an undefined weak symbol satisfies this condition because
such a symbol is handled as if it were an absolute symbol at address 0.</p>
</li>
<li>
<p>If the symbol is relative, it&#8217;s bound at link time to be within the
object. It should not be of the GNU ifunc type. Additionally, the offset
between the location to which <code>R_RISCV_GOT_HI20</code> refers and the target
symbol should be within a range of +-2GiB.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Relaxation</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>The <code>auipc</code> instruction associated with <code>R_RISCV_GOT_HI20</code> can be
removed if the symbol is absolute.</p>
</li>
<li>
<p>The instruction or instructions associated with <code>R_RISCV_PCREL_LO12_I</code>
can be rewritten to either <code>c.li</code> or <code>addi</code> to materialize the symbol&#8217;s
address directly in a register.</p>
</li>
<li>
<p>If this relaxation eliminates all references to the symbol&#8217;s GOT slot,
the linker may opt not to create a GOT slot for that symbol.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Relaxation candidate:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">label:
    auipc   tX, 0      # R_RISCV_GOT_HI20 (symbol), R_RISCV_RELAX
    l[w|d]  tY, 0(tX)  # R_RISCV_PCREL_LO12_I (label), R_RISCV_RELAX</code></pre>
</div>
</div>
<div class="paragraph">
<p>Relaxation result (absolute symbol whose address can be represented as
a 6-bit signed integer and if the RVC instruction is permitted):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    c.li    tY, &lt;symbol-value&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Relaxation result (absolute symbol and did not meet the above condition
to use <code>c.li</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    addi    tY, zero, &lt;symbol-value&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Relaxation result (relative symbol):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    auipc   tX, &lt;hi&gt;
    addi    tY, tX, &lt;lo&gt;</code></pre>
</div>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="zero-page-relaxation"><a class="anchor" href="#zero-page-relaxation"></a>Zero-Page Relaxation</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Target Relocation</dt>
<dd>
<p>R_RISCV_HI20, R_RISCV_LO12_I, R_RISCV_LO12_S</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>This relaxation type can relax a sequence of the load
address of a symbol or load/store with a symbol reference into shorter
instruction sequence if possible.</p>
</dd>
<dt class="hdlist1">Condition</dt>
<dd>
<p>The symbol address located within <code>0x0</code> ~ <code>0x7ff</code> or
<code>0xfffffffffffff800</code> ~ <code>0xffffffffffffffff</code> for RV64 and
<code>0xfffff800</code> ~ <code>0xffffffff</code> for RV32.</p>
</dd>
<dt class="hdlist1">Relaxation</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Instruction associated  with <code>R_RISCV_HI20</code> can be removed if the symbol
address satisfies the x0-relative access.</p>
</li>
<li>
<p>Instruction associated with <code>R_RISCV_LO12_I</code> or <code>R_RISCV_LO12_S</code> can be
relaxed into x0-relative access.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Relaxation candidate:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    lui t0, 0       # R_RISCV_HI20 (symbol), R_RISCV_RELAX
    lw t1, 0(t0)    # R_RISCV_LO12_I (symbol), R_RISCV_RELAX</code></pre>
</div>
</div>
<div class="paragraph">
<p>Relaxation result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    lw t1, &lt;address-of-symbol&gt;(x0)</code></pre>
</div>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="compressed-lui-relaxation"><a class="anchor" href="#compressed-lui-relaxation"></a>Compressed LUI Relaxation</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Target Relocation</dt>
<dd>
<p>R_RISCV_HI20, R_RISCV_LO12_I, R_RISCV_LO12_S</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>This relaxation type can relax a sequence of the load
address of a symbol or load/store with a symbol reference into shorter
instruction sequence if possible.</p>
</dd>
<dt class="hdlist1">Condition</dt>
<dd>
<p>The symbol address can be presented by a <code>C.LUI</code> plus an <code>ADDI</code>
or load / store instruction.</p>
</dd>
<dt class="hdlist1">Relaxation</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Instruction associated with <code>R_RISCV_HI20</code> can be replaced with <code>C.LUI</code>.</p>
</li>
<li>
<p>Instruction associated with <code>R_RISCV_LO12_I</code> or <code>R_RISCV_LO12_S</code> should keep
unchanged.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Relaxation candidate:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    lui t0, 0       # R_RISCV_HI20 (symbol), R_RISCV_RELAX
    lw t1, 0(t0)    # R_RISCV_LO12_I (symbol), R_RISCV_RELAX</code></pre>
</div>
</div>
<div class="paragraph">
<p>Relaxation result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    c.lui t0, &lt;non-zero&gt;  # RVC_LUI (symbol), R_RISCV_RELAX
    lw t1, 0(t0)          # R_RISCV_LO12_I (symbol), R_RISCV_RELAX</code></pre>
</div>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="thread-pointer-relaxation"><a class="anchor" href="#thread-pointer-relaxation"></a>Thread-Pointer Relaxation</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Target Relocation</dt>
<dd>
<p>R_RISCV_TPREL_HI20, R_RISCV_TPREL_ADD,
R_RISCV_TPREL_LO12_I, R_RISCV_TPREL_LO12_S.</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>This relaxation type can relax a sequence of the load
address of a symbol or load/store with a thread-local symbol reference into a
thread-pointer-relative instruction.</p>
</dd>
<dt class="hdlist1">Condition</dt>
<dd>
<p>Offset between thread-pointer and thread-local symbol is within
+-2KiB.</p>
</dd>
<dt class="hdlist1">Relaxation</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Instruction associated with <code>R_RISCV_TPREL_HI20</code> or <code>R_RISCV_TPREL_ADD</code> can
be removed.</p>
</li>
<li>
<p>Instruction associated with <code>R_RISCV_TPREL_LO12_I</code> or <code>R_RISCV_TPREL_LO12_S</code>
can be replaced with a thread-pointer-relative access instruction.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Relaxation candidate:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    lui t0, 0       # R_RISCV_TPREL_HI20 (symbol), R_RISCV_RELAX
    add t0, t0, tp  # R_RISCV_TPREL_ADD (symbol), R_RISCV_RELAX
    lw t1, 0(t0)    # R_RISCV_TPREL_LO12_I (symbol), R_RISCV_RELAX</code></pre>
</div>
</div>
<div class="paragraph">
<p>Relaxation result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    lw t1, &lt;tp-offset-for-symbol&gt;(tp)</code></pre>
</div>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="tls-descriptors-initial-exec-relaxation"><a class="anchor" href="#tls-descriptors-initial-exec-relaxation"></a>TLS Descriptors &#8594; Initial Exec Relaxation</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Target Relocation</dt>
<dd>
<p>R_RISCV_TLSDESC_HI20, R_RISCV_TLSDESC_LOAD_LO12, R_RISCV_TLSDESC_ADD_LO12, R_RISCV_TLSDESC_CALL</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>This relaxation can relax a sequence loading the address of a thread-local symbol reference into a GOT load instruction.</p>
</dd>
<dt class="hdlist1">Condition</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Linker output is an executable.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Relaxation</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Instruction associated with <code>R_RISCV_TLSDESC_HI20</code> or <code>R_RISCV_TLSDESC_LOAD_LO12</code> can be removed.</p>
</li>
<li>
<p>Instruction associated with <code>R_RISCV_TLSDESC_ADD_LO12</code> can be replaced with load of the high half of the symbol&#8217;s GOT address.</p>
</li>
<li>
<p>Instruction associated with <code>R_RISCV_TLSDESC_CALL</code> can be replaced with load of the low half of the symbol&#8217;s GOT address.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Relaxation candidate (<code>tX</code> and <code>tY</code> can be any combination of two general purpose registers):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">label:
	auipc tX, &lt;hi&gt;      // R_RISCV_TLSDESC_HI20 (symbol), R_RISCV_RELAX
	lw    tY, tX, &lt;lo&gt;  // R_RISCV_TLSDESC_LOAD_LO12 (label)
	addi  a0, tX, &lt;lo&gt;  // R_RISCV_TLSDESC_ADD_LO12 (label)
	jalr  t0, tY        // R_RISCV_TLSDESC_CALL (label)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Relaxation result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">	auipc   a0, &lt;pcrel-got-offset-for-symbol-hi&gt;
	{ld,lw} a0, &lt;pcrel-got-offset-for-symbol-lo&gt;(a0)</code></pre>
</div>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="tls-descriptors-local-exec-relaxation"><a class="anchor" href="#tls-descriptors-local-exec-relaxation"></a>TLS Descriptors &#8594; Local Exec Relaxation</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Target Relocation</dt>
<dd>
<p>R_RISCV_TLSDESC_HI20, R_RISCV_TLSDESC_LOAD_LO12, R_RISCV_TLSDESC_ADD_LO12, R_RISCV_TLSDESC_CALL</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<p>This relaxation can relax a sequence loading the address of a thread-local symbol reference into a thread-pointer-relative instruction sequence.</p>
</dd>
<dt class="hdlist1">Condition</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Short form only: Offset between thread-pointer and thread-local symbol is within +-2KiB.</p>
</li>
<li>
<p>Linker output is an executable.</p>
</li>
<li>
<p>Target symbol is non-preemptible.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Relaxation</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Instruction associated with <code>R_RISCV_TLSDESC_HI20</code> or <code>R_RISCV_TLSDESC_LOAD_LO12</code> can be removed.</p>
</li>
<li>
<p>Instruction associated with <code>R_RISCV_TLSDESC_ADD_LO12</code> can be replaced with the high TP-relative offset of symbol (long form) or be removed (short form).</p>
</li>
<li>
<p>Instruction associated with <code>R_RISCV_TLSDESC_CALL</code> can be replaced with the low TP-relative offset of symbol.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Relaxation candidate (<code>tX</code> and <code>tY</code> can be any combination of two general purpose registers):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">label:
	auipc tX, &lt;hi&gt;      // R_RISCV_TLSDESC_HI20 (symbol), R_RISCV_RELAX
	lw    tY, tX, &lt;lo&gt;  // R_RISCV_TLSDESC_LOAD_LO12 (label)
	addi  a0, tX, &lt;lo&gt;  // R_RISCV_TLSDESC_ADD_LO12 (label)
	jalr  t0, tY        // R_RISCV_TLSDESC_CALL (label)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Relaxation result (long form):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">	lui a0, &lt;tp-offset-for-symbol-hi&gt;
	addi a0, a0, &lt;tp-offset-for-symbol-lo&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Relaxation result (short form):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">	addi a0, zero, &lt;tp-offset-for-symbol&gt;</code></pre>
</div>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="table-jump-relaxation"><a class="anchor" href="#table-jump-relaxation"></a>Table Jump Relaxation</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Target Relocation</dt>
<dd>
<p>R_RISCV_CALL, R_RISCV_CALL_PLT, R_RISCV_JAL.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Description</dt>
<dd>
<p>This relaxation type can relax a function call or jump
instruction into a single table jump instruction with the index of the target
address in table jump section (<a href="#rv-section">RISC-V-specific sections</a>).
Before relaxation, the linker scans all relocations and calculates whether
additional gains can be obtained by using table jump instructions, where
expected size saving from function-call-related relaxations and the size of jump
table will be taken into account. If there is no additional gain, then table
jump relaxation is ignored. Otherwise, this relaxation is switched on.
<a href="#compress-tailcall-relax">Compressed Tail Call Relaxation</a> and
<a href="#compress-func-call-relax">Compressed Function Call Relaxation</a> are
always prefered during relaxation, since table jump relaxation has no
extra size saving over these two relaxations and might bring a performance
overhead.</p>
</dd>
<dt class="hdlist1">Condition</dt>
<dd>
<p>The <code>zcmt</code> extension is required, the linker output is not
position-independent and the rd operand of a function call or jump instruction
is <code>X0</code> or <code>RA</code>.</p>
</dd>
<dt class="hdlist1">Relaxation</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Instruction sequence associated with <code>R_RISCV_CALL</code> or <code>R_RISCV_CALL_PLT</code>
can be rewritten to a table jump instruction.</p>
</li>
<li>
<p>Instruction associated with <code>R_RISCV_JAL</code> can be rewritten to a table
jump instruction.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Example</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Relaxation candidate:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    auipc ra, 0           # R_RISCV_CALL (symbol), R_RISCV_RELAX (symbol)
    jalr  ra, ra, 0

    auipc ra, 0           # R_RISCV_CALL_PLT (symbol), R_RISCV_RELAX (symbol)
    jalr  x0, ra, 0

    jal ra, 0             # R_RISCV_JAL (symbol), R_RISCV_RELAX (symbol)

    jal x0, 0             # R_RISCV_JAL (symbol), R_RISCV_RELAX (symbol)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Relaxation result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    cm.jalt  &lt;index-for-symbol&gt;

    cm.jt    &lt;index-for-symbol&gt;

    cm.jalt  &lt;index-for-symbol&gt;</code></pre>
</div>
</div>
</div>
</div>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>zcmt</code> extension cannot be used in position-independent binaries.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Jump or call instructions with the rd operand <code>RA</code> will be relaxed into
<code>cm.jalt</code> and instructions with the rd operand <code>X0</code> will be relaxed into
<code>cm.jt</code>. The table jump section holds target addresses for these two
instructions separately. More details are available in the <em>ZC* extension
specification</em> <a href="#riscv-zc-extension-group">[riscv-zc-extension-group]</a>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This relaxation requires programs to initialize the <code>jvt</code> CSR with the
address of the <code>__jvt_base$</code> symbol before executing table jump
instructions. It is recommended to initialize <code>jvt</code> CSR immediately after
<a href="#gp-relax-asm">global pointer initialization</a>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asm hljs" data-lang="asm">    # Recommended way to initialize the jvt CSR.
1:  auipc a0, %pcrel_hi(__jvt_base$)
    addi  a0, a0, %pcrel_lo(1b)
    csrw  jvt, a0</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="references"><a class="anchor" href="#references"></a>References</h2>
<div class="sectionbody">
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="gabi"></a>[gabi] "Generic System V Application Binary Interface"
<a href="http://www.sco.com/developers/gabi/latest/contents.html" class="bare">http://www.sco.com/developers/gabi/latest/contents.html</a></p>
</li>
<li>
<p><a id="itanium-cxx-abi"></a>[itanium-cxx-abi] "Itanium C&#43;&#43; ABI"
<a href="http://itanium-cxx-abi.github.io/cxx-abi/" class="bare">http://itanium-cxx-abi.github.io/cxx-abi/</a></p>
</li>
<li>
<p><a id="rv-asm"></a>[rv-asm] "RISC-V Assembly Programmer&#8217;s Manual"
<a href="https://github.com/riscv-non-isa/riscv-asm-manual" class="bare">https://github.com/riscv-non-isa/riscv-asm-manual</a></p>
</li>
<li>
<p><a id="tls"></a>[tls] "ELF Handling For Thread-Local Storage"
<a href="https://www.akkadia.org/drepper/tls.pdf" class="bare">https://www.akkadia.org/drepper/tls.pdf</a>, Ulrich Drepper</p>
</li>
<li>
<p><a id="riscv-unpriv"></a>[riscv-unpriv] "The RISC-V Instruction Set Manual, Volume I: User-Level
ISA, Document", Editors Andrew Waterman and Krste AsanoviÂ´c,
RISC-V International.</p>
</li>
<li>
<p><a id="riscv-unpriv-20191213"></a>[riscv-unpriv-20191213] "The RISC-V Instruction Set Manual, Volume I: User-Level
ISA, Document release 20191213", Editors Andrew Waterman and Krste AsanoviÂ´c,
RISC-V International.</p>
</li>
<li>
<p><a id="riscv-zc-extension-group"></a>[riscv-zc-extension-group] "ZC* extension specification"
<a href="https://github.com/riscv/riscv-code-size-reduction" class="bare">https://github.com/riscv/riscv-code-size-reduction</a></p>
</li>
<li>
<p><a id="rv-toolchain-conventions"></a>[rv-toolchain-conventions] "RISC-V Toolchain Conventions"
<a href="https://github.com/riscv-non-isa/riscv-toolchain-conventions" class="bare">https://github.com/riscv-non-isa/riscv-toolchain-conventions</a></p>
</li>
</ul>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="riscv-cc.html">Calling Conventions</a></span>
  <span class="next"><a href="riscv-dwarf.html">DWARF Specification</a></span>
</nav>
</article>  </div>
</main>
<div class="modal micromodal-slide" id="modal-versions" aria-hidden="true">
    <div class="modal__overlay" tabindex="-1" data-micromodal-close>
        <div class="modal__container" role="dialog" aria-modal="true">
            <main class="modal__content" id="modal-versions-content">
              <button data-micromodal-close class="modal-versions-close">
                <svg width="28px" height="28px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><defs><style>.cls-1h{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px;}</style></defs><title/><g id="cross"><line class="cls-1h" x1="7" x2="25" y1="7" y2="25"/><line class="cls-1h" x1="7" x2="25" y1="25" y2="7"/></g></svg>
              </button>
                  <ul class="nav-versions">
                      <li class="component">
                        <div>
                          <a class="title" href="../../ffh/v1.0/index.html">ACPI Functional Fixed Hardware</a>
                        </div>                        <div class="version-item is-active">
                          <div>
                            <button class="version-toggle" type="button">
                              <span></span>
                              Stable
                            </button>
                          </div>
                          <ul class="versions">
  <li class="version">
    <a href="../../ffh/v1.0/index.html">
      v1.0
    </a>
  </li>
</ul>                        </div>
                        
                      </li>
                      <li class="component">
                        <div>
                          <a class="title" href="../../aia/v1.0/index.html">Advanced Interrupt Architecture</a>
                        </div>                        <div class="version-item is-active">
                          <div>
                            <button class="version-toggle" type="button">
                              <span></span>
                              Stable
                            </button>
                          </div>
                          <ul class="versions">
  <li class="version">
    <a href="../../aia/v1.0/index.html">
      v1.0
    </a>
  </li>
</ul>                        </div>
                        
                      </li>
                      <li class="component">
                        <div>
                          <a class="title" href="../../etrace/v1.0/index.html">E-Trace Encapsulation Specification</a>
                        </div>                        <div class="version-item is-active">
                          <div>
                            <button class="version-toggle" type="button">
                              <span></span>
                              Stable
                            </button>
                          </div>
                          <ul class="versions">
  <li class="version">
    <a href="../../etrace/v1.0/index.html">
      v1.0
    </a>
  </li>
</ul>                        </div>
                        
                      </li>
                      <li class="component">
                        <div>
                          <a class="title" href="index.html">ELF psABI Specification</a>
                        </div>                        <div class="version-item is-active">
                          <div>
                            <button class="version-toggle" type="button">
                              <span></span>
                              Stable
                            </button>
                          </div>
                          <ul class="versions">
  <li class="version">
    <a href="index.html">
      v1.0
    </a>
  </li>
</ul>                        </div>
                        
                      </li>
                      <li class="component">
                        <div>
                          <a class="title" href="../../iommuArch/v1.0/index.html">IOMMU Architecture</a>
                        </div>                        <div class="version-item is-active">
                          <div>
                            <button class="version-toggle" type="button">
                              <span></span>
                              Stable
                            </button>
                          </div>
                          <ul class="versions">
  <li class="version">
    <a href="../../iommuArch/v1.0/index.html">
      v1.0
    </a>
  </li>
</ul>                        </div>
                        
                      </li>
                      <li class="component">
                        <div>
                          <a class="title" href="../../isa/index.html">ISA Specifications</a>
                        </div>                        <div class="version-item is-active">
                          <div>
                            <button class="version-toggle" type="button">
                              <span></span>
                              Stable
                            </button>
                          </div>
                          <ul class="versions">
  <li class="version">
    <a href="../../isa/index.html">
      default
    </a>
  </li>
</ul>                        </div>
                        
                      </li>
                      <li class="component">
                        <div>
                          <a class="title" href="../../reri/v1.0/index.html">RERI Architecture</a>
                        </div>                        <div class="version-item is-active">
                          <div>
                            <button class="version-toggle" type="button">
                              <span></span>
                              Stable
                            </button>
                          </div>
                          <ul class="versions">
  <li class="version">
    <a href="../../reri/v1.0/index.html">
      v1.0
    </a>
  </li>
</ul>                        </div>
                        
                      </li>
                      <li class="component">
                        <div>
                          <a class="title" href="../../qos/v1.0/index.html">RISC-V Capacity and Bandwidth QoS Register Interface</a>
                        </div>                        <div class="version-item is-active">
                          <div>
                            <button class="version-toggle" type="button">
                              <span></span>
                              Stable
                            </button>
                          </div>
                          <ul class="versions">
  <li class="version">
    <a href="../../qos/v1.0/index.html">
      v1.0
    </a>
  </li>
</ul>                        </div>
                        
                      </li>
                      <li class="component">
                        <div>
                          <a class="title" href="../../plic/v1.0.0/index.html">RISC-V Platform-Level Interrupt Controller</a>
                        </div>                        <div class="version-item is-active">
                          <div>
                            <button class="version-toggle" type="button">
                              <span></span>
                              Stable
                            </button>
                          </div>
                          <ul class="versions">
  <li class="version">
    <a href="../../plic/v1.0.0/index.html">
      v1.0.0
    </a>
  </li>
</ul>                        </div>
                        
                      </li>
                      <li class="component">
                        <div>
                          <a class="title" href="../../semihost/v1.0/index.html">semihosting</a>
                        </div>                        <div class="version-item is-active">
                          <div>
                            <button class="version-toggle" type="button">
                              <span></span>
                              Stable
                            </button>
                          </div>
                          <ul class="versions">
  <li class="version">
    <a href="../../semihost/v1.0/index.html">
      v1.0
    </a>
  </li>
</ul>                        </div>
                        
                      </li>
                  </ul>
            </main>
        </div>
    </div>
</div>

</div>
<footer class="hidden">
</footer><script src="../../_/js/vendor/import.js"></script>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script async src="../../_/js/vendor/spring-tabs.js" data-sync-storage-key="docs:preferred-tab"></script>
  </body>
</html>
