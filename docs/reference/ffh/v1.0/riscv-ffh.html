<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>RISC-V Functional Fixed Hardware Specification :: RISC-V Ratified Specifications Library</title>
    <link rel="prev" href="index.html">
    <meta name="description" content="RISC-V Functional Fixed Hardware Specification">
    <meta name="generator" content="Antora 3.1.12">
    <script>
!function (theme, navWidth) {
  if (theme === 'dark') document.documentElement.classList.add('dark-theme')
  if (navWidth) document.documentElement.style.setProperty('--nav-width', `${navWidth}px`)
}(localStorage && localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)')?.matches && 'dark'),
  localStorage && localStorage.getItem('nav-width'))
    </script>
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/vendor/search.css">
    <link rel="stylesheet" href="../../_/css/vendor/page-search.css">
    <link rel="stylesheet" href="../../_/css/vendor/spring-tabs.css">

    <meta name="antora-ui-version" content="1ea0d9f81bc80a15c1f560d76c5d8bddea1856e2"> 
    <meta name="version" content="v1.0">
    <meta name="component" content="ffh">
    <meta name="latest-version" content="false">
    <link rel="icon" href="../../_/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">


<header class="header" id="antora-header">
    <nav class="navbar">
        <head>
            <link data-rh="true" rel="icon" href="/img/favicon.ico">
            <link data-rh="true" rel="canonical" href="https://developer.riscv.org/ref">
            <link data-rh="true" rel="alternate" href="https://developer.riscv.org/ref" hreflang="en">
            <link data-rh="true" rel="alternate" href="https://developer.riscv.org/ref" hreflang="x-default">
            <link data-rh="true" rel="preconnect" href="https://MGVPU7BN22-dsn.algolia.net" crossorigin="anonymous">
            <link rel="stylesheet" type="text/css" href="/docs/reference/_/docusaurus-styles-copy-08-25.css">

        </head>

            <link rel="preload" as="image" href="/img/logo.svg">
            <div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div>
            <div class="announcementBar_mb4j" role="banner">
                <div class="announcementBarPlaceholder_vyr4"></div>
                <div class="content_knG7 announcementBarContent_xLdY">congratulations, you found the RISC-V Developer Portal! 🎉 . This site is under active development and not meant for public consumption yet.</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div>
            <nav aria-label="Main" class="navbar ">
                <div class="navbar__inner">
                    <div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button>
                        <a class="navbar__brand" href="/">
                            <div class="navbar__logo"><img src="/img/logo.svg" alt="RISC-V Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="RISC-V Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Home</b></a>
                        <div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Specifications</a>
                            <ul class="dropdown__menu">
                                <li><a class="dropdown__link" href="/docs/spec/isa">ISA</a></li>
                                <li><a class="dropdown__link" href="/docs/spec/profiles">Profiles</a></li>
                                <li><a class="dropdown__link" docid="spec/non-isa" href="/docs/spec/non-isa">Non-ISA</a></li>
                            </ul>
                        </div>
                        <div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Developers</a>
                            <ul class="dropdown__menu">
                                <li><a class="dropdown__link" href="/docs/spec/intro">Specification Developers</a></li>
                                <li><a class="dropdown__link" href="/docs/hardware/overview">Hardware Developers</a></li>
                                <li><a class="dropdown__link" href="/docs/software/overview">Software Developers</a></li>
                            </ul>
                        </div><a class="navbar__item navbar__link" href="/blog">Blog</a><a href="https://riscv.org/community/calendar/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Events<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div>
                    <div class="navbar__items navbar__items--right">
                      <div class="navbarSearchContainer_Bca1">
                        <button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)">
                          <span class="DocSearch-Button-Container">
                            <svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true">
                              <path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path>
                            </svg>
                            <span class="DocSearch-Button-Placeholder">Search</span>
                          </span>
                          <span class="DocSearch-Button-Keys"></span>
                        </button>
                      </div>
                    </div>
                </div>
                <div role="presentation" class="navbar-sidebar__backdrop"></div>
            </nav>
            <div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper__tJE"></div>
        

    </nav>
</header><div class="body">
<div class="nav-container" data-component="ffh" data-version="v1.0">
  <aside class="nav">
    <div class="panels">
      <div class="nav-panel-menu is-active" data-panel="menu">
        <nav class="nav-menu">
<div class="context">
  <span class="title">ACPI Functional Fixed Hardware</span>
  <span class="version">v1.0</span>
  <button class="browse-version" id="browse-version">
    <svg
      height="24px"
      id="Layer_1"
      style="enable-background:new 0 0 512 512;"
      version="1.1"
      viewBox="0 0 512 512"
      width="24px"
      xml:space="preserve"
    ><g><path
          d="M256,224c-17.7,0-32,14.3-32,32s14.3,32,32,32c17.7,0,32-14.3,32-32S273.7,224,256,224L256,224z"
        ></path><path
          d="M128.4,224c-17.7,0-32,14.3-32,32s14.3,32,32,32c17.7,0,32-14.3,32-32S146,224,128.4,224L128.4,224z"
        ></path><path
          d="M384,224c-17.7,0-32,14.3-32,32s14.3,32,32,32s32-14.3,32-32S401.7,224,384,224L384,224z"
        ></path></g></svg>
  </button>
  </div><ul class="nav-list">
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">ACPI Functional Fixed Hardware</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link"  href="riscv-ffh.html">ACPI Functional Fixed Hardware</a>
  </li>
</ul>
  </li>
</ul>
          <div class="toggle-sm">
            <button id="nav-toggle-2" class="nav-toggle"></button>
          </div>
        </nav>
      </div>
      <div class="nav-collapse">
        <button id="nav-collapse-toggle"><span></span></button>        
      </div>
    </div>
    <div class="nav-resize"></div>
  </aside>
</div>
<script>
!function (sidebar) {
  if (sidebar) {
    document.body.classList.add('nav-sm')
  }
}(localStorage && localStorage.getItem('sidebar') === 'close')
</script><main class="article">
<div class="toolbar" role="navigation">
  <button id="nav-toggle-1" class="nav-toggle"></button>
</div>
  <div class="content">
<aside class="sidebar">
  <div class="content">
    <div
      class="toc"
      data-title="RISC-V Functional Fixed Hardware Specification"
      data-levels="2"
    >
      <div class="toc-menu"></div>
    </div>
    <div class="sidebar-links">
        <a href="https://github.com/riscv-non-isa/riscv-acpi-ffh/edit/antora-refactor/modules/ROOT/pages/riscv-ffh.adoc">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="24"
            viewBox="0 0 24 24"
            width="24"
          ><path
              d="m16 2.012 3 3L16.713 7.3l-3-3zM4 14v3h3l8.299-8.287-3-3zm0 6h16v2H4z"
            ></path></svg>
          Edit this Page
        </a>
              <a href="https://github.com/riscv-non-isa/riscv-acpi-ffh" title="Source Repository">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="512px" height="512px" fill="none">
    <path d="M23.6188 12.9999L19.8886 2.82896C19.7371 2.4083 19.122 2.4083 18.9705 2.82896L16.494 9.99994H7.50604L5.02956 2.82896C4.87803 2.4083 4.26295 2.4083 4.11142 2.82896L0.381247 12.9999C0.276408 13.289 0.404366 13.6112 0.678 13.7651L11.5243 19.6958C11.8256 19.8611 12.1744 19.8611 12.4757 19.6958L23.322 13.7651C23.5956 13.6112 23.7236 13.289 23.6188 12.9999Z" fill="#E24329"/>
    <path d="M12.0001 19.1956L16.4941 9.99996H7.5061L12.0001 19.1956Z" fill="#FCA326"/>
    <path d="M12.0001 19.1955L7.5061 9.99988H3.24121L12.0001 19.1955Z" fill="#E24329"/>
    <path d="M3.24121 9.99988L0.381226 12.9998C0.276388 13.2889 0.404345 13.6111 0.678 13.765L12.0001 19.1955L3.24121 9.99988Z" fill="#FCA326"/>
    <path d="M12.0001 19.1955L16.4941 9.99988H20.7589L12.0001 19.1955Z" fill="#E24329"/>
    <path d="M20.7589 9.99988L23.6188 12.9998C23.7237 13.2889 23.5957 13.6111 23.322 13.765L12.0001 19.1955L20.7589 9.99988Z" fill="#FCA326"/>
    <path d="M16.494 9.99988H20.7589L18.9705 2.82894C18.819 2.40828 18.2039 2.40828 18.0524 2.82894L16.494 9.99988Z" fill="#E24329"/>
    <path d="M7.50603 9.99988H3.24121L4.11141 2.82894C4.26294 2.40828 4.87802 2.40828 5.02955 2.82894L7.50603 9.99988Z" fill="#E24329"/>
  </svg>
  Source Repository
</a>
    </div>
  </div>
</aside>
<article class="doc">
<div class="breadcrumbs-container">
  <nav class="breadcrumbs" aria-label="breadcrumbs">
    <ul>
      <li>ACPI Functional Fixed Hardware</li>
      <li><a href="riscv-ffh.html">ACPI Functional Fixed Hardware</a></li>
    </ul>
  </nav>
</div><h1 id="page-title" class="page">RISC-V Functional Fixed Hardware Specification</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#copyright-and-license-information">Copyright and license information</a></li>
<li><a href="#contributors">Contributors</a></li>
<li><a href="#change-log">Change Log</a>
<ul class="sectlevel2">
<li><a href="#version-1-0-0">Version 1.0.0</a>
<ul class="sectlevel3">
<li><a href="#version-1-0-1">Version 1.0.1</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#terms-and-abbreviations">1.1. Terms and Abbreviations</a></li>
<li><a href="#references">1.2. References</a></li>
</ul>
</li>
<li><a href="#resource_descriptor_encoding">2. RISC-V FFH Resource Descriptor Encoding</a></li>
<li><a href="#use-cases">3. Use Cases</a>
<ul class="sectlevel2">
<li><a href="#lower-power-idle-states">3.1. Lower Power Idle States</a>
<ul class="sectlevel3">
<li><a href="#entry-method">3.1.1. Entry Method</a></li>
<li><a href="#arch-context-lost-flags">3.1.2. Arch. Context Lost Flags</a></li>
</ul>
</li>
<li><a href="#collaborative-processor-performance-control">3.2. Collaborative Processor Performance Control</a>
<ul class="sectlevel3">
<li><a href="#_cpc-object-resource-descriptor">3.2.1. _CPC Object Resource Descriptor</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#lpi_examples">Appendix A: _LPI Object Examples</a></li>
<li><a href="#cppc_examples">Appendix B: _CPC Object Examples</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="title">This document is in the <a href="http://riscv.org/spec-state">Ratified state</a></div>
<div class="paragraph">
<p>No changes are allowed. Any desired or needed changes can be the subject of a follow-on new extension. Ratified extensions are never revised.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="copyright-and-license-information"><a class="anchor" href="#copyright-and-license-information"></a>Copyright and license information</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This specification is licensed under the Creative Commons
Attribution 4.0 International License (CC-BY 4.0). The full
license text is available at
<a href="https://creativecommons.org/licenses/by/4.0/" class="bare">creativecommons.org/licenses/by/4.0/</a>.</p>
</div>
<div class="paragraph">
<p>Copyright 2023 by RISC-V International.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributors"><a class="anchor" href="#contributors"></a>Contributors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This RISC-V specification has been contributed to directly or indirectly by:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Andrew Jones <a href="mailto:ajones@ventanamicro.com">ajones@ventanamicro.com</a></p>
</li>
<li>
<p>Atish Patra <a href="mailto:atishp@rivosinc.com">atishp@rivosinc.com</a></p>
</li>
<li>
<p>Rafael Sene <a href="mailto:rafael@riscv.org">rafael@riscv.org</a></p>
</li>
<li>
<p>Vasudevan Srinivasan <a href="mailto:vasu@rivosinc.com">vasu@rivosinc.com</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="change-log"><a class="anchor" href="#change-log"></a>Change Log</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="version-1-0-0"><a class="anchor" href="#version-1-0-0"></a>Version 1.0.0</h3>
<div class="ulist">
<ul>
<li>
<p>Initial version</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="version-1-0-1"><a class="anchor" href="#version-1-0-1"></a>Version 1.0.1</h4>
<div class="ulist">
<ul>
<li>
<p>Only print the specification state on the title page, not the entire text.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="introduction"><a class="anchor" href="#introduction"></a>1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>RISC-V systems which use Advanced Configuration and Power Interface (ACPI)
require additional specifications for some ACPI object fields, typically
those of type “Resource Descriptor”.  A Functional Fixed Hardware (FFH)
specification provides those additional specifications.  The use cases
addressed by this FFH are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Lower Power Idle States (LPI), [ACPI 6.5] section 8.4.3</p>
</li>
<li>
<p>Collaborative Processor Performance Control (CPPC), [ACPI 6.5] section 8.4.6</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="terms-and-abbreviations"><a class="anchor" href="#terms-and-abbreviations"></a>1.1. Terms and Abbreviations</h3>
<div class="paragraph">
<p>This specification uses the following terms and abbreviations:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 80%;">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Term</th>
<th class="tableblock halign-left valign-top">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACPI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Advanced Configuration and Power Interface Specification</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ASL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ACPI Source Language</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CPC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Continuous Performance Control</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CPPC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Collaborative Processor Performance Control</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FFH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Functional Fixed Hardware</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HSM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hart State Management</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LPI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Low Power Idle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OSPM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operating System-directed configuration and Power Management</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SBI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supervisor Binary Interface</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="references"><a class="anchor" href="#references"></a>1.2. References</h3>
<table class="tableblock frame-all grid-all" style="width: 80%;">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Reference</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[ACPI 6.5]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Advanced Configuration and Power Interface Specification
               version 6.5<br>
               <a href="https://uefi.org/specs/ACPI/6.5/" class="bare">uefi.org/specs/ACPI/6.5/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">[SBI]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RISC-V Supervisor Binary Interface Specification version 2.0<br>
               <a href="https://github.com/riscv-non-isa/riscv-sbi-doc/" class="bare">github.com/riscv-non-isa/riscv-sbi-doc/</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resource_descriptor_encoding"><a class="anchor" href="#resource_descriptor_encoding"></a>2. RISC-V FFH Resource Descriptor Encoding</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Resource descriptors, which are formatted per the “Generic Register Descriptor”
definition ([ACPI 6.5] section 6.4.3.7, also see ASL Register in section
19.6.114), are used by ACPI tables to provide the OSPM read and/or write access
to platform-specific “registers”.  A resource descriptor may be a fixed value,
hardware address, function or function parameter identifier, or any other
encoding of its bits.  While encodings are specific to their applications,
RISC-V uses a common top-level encoding whenever possible.  That encoding is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Register bit width is 64</p>
</li>
<li>
<p>The uppermost 4 bits are used to specify the type of identifier represented
in the remaining bits.  The possible types are described in table
<a href="#table_ffh_resource_descriptor_identifier_type">Table 1</a></p>
</li>
</ul>
</div>
<table id="table_ffh_resource_descriptor_identifier_type" class="tableblock frame-all grid-all" style="width: 90%;">
<caption class="title">Table 1. RISC-V FFH Resource Descriptor Identifier Type</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">Type</th>
<th class="tableblock halign-center valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x0</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">None / Other</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Bits[31:0] represent an SBI identifier</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Bits[11:0] represent a CSR identifier</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>NOTE:</strong> While it is possible for identical RISC-V FFH Resource Descriptor
addresses to appear across ACPI tables, the addresses may not share the
same semantics.  Each address must be interpreted per its respective
ACPI table type.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="use-cases"><a class="anchor" href="#use-cases"></a>3. Use Cases</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="lower-power-idle-states"><a class="anchor" href="#lower-power-idle-states"></a>3.1. Lower Power Idle States</h3>
<div class="paragraph">
<p>It is desirable for RISC-V system harts to transition to lower power states
when they go idle.  ACPI provides Lower Power Idle State (_LPI) objects which
support an operating system’s implementation of transitioning to lower power
states.  The following subsections specify some fields of the _LPI object for
RISC-V systems.  Refer to the ACPI specification for all remaining fields.</p>
</div>
<div class="sect3">
<h4 id="entry-method"><a class="anchor" href="#entry-method"></a>3.1.1. Entry Method</h4>
<div class="paragraph">
<p>The _LPI object uses a “Resource Descriptor”, which is formatted per
<a href="#resource_descriptor_encoding">Chapter 2</a>, to specify the entry method for a lower
power state.  RISC-V systems set the resource descriptor as specified in
<a href="#table_lpi_entry_method">Table 2</a>:</p>
</div>
<table id="table_lpi_entry_method" class="tableblock frame-all grid-all" style="width: 90%;">
<caption class="title">Table 2. LPI Entry Method</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">Field</th>
<th class="tableblock halign-center valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><em>Address Space</em></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x7F (FFixedHW)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><em>Register Bit Width</em></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">64</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><em>Register Bit Offset</em></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><em>Access Size</em></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">4 (QWord)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><em>Register Address</em></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">As specified in the Bits[63:60],
                                     Bits[59:32], and Bits[31:0] columns of
                                    <a href="#table_lpi_entry_method_address">Table 3</a></p></td>
</tr>
</tbody>
</table>
<table id="table_lpi_entry_method_address" class="tableblock frame-all grid-all" style="width: 90%;">
<caption class="title">Table 3. LPI Entry Method Address</caption>
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 28.5714%;">
<col style="width: 28.5715%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">Bits[63:60]<br>
   (Type)</th>
<th class="tableblock halign-center valign-top">Bits[59:32]</th>
<th class="tableblock halign-center valign-top">Bits[31:0]</th>
<th class="tableblock halign-center valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x0</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x000_0000</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x0000_0000</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">WFI</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x000_0000</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">SBI HSM hart<br>
                       suspend type</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Suspend the hart using<br>
  the SBI HSM extension</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>All other encodings for LPI entry methods with <em>Address Space</em> set to
<em>FFixedHW</em> (0x7f) are reserved for future use.</p>
</div>
</div>
<div class="sect3">
<h4 id="arch-context-lost-flags"><a class="anchor" href="#arch-context-lost-flags"></a>3.1.2. Arch. Context Lost Flags</h4>
<div class="paragraph">
<p>_LPI objects also provide an <em>Arch. Context Lost Flags</em> field, which is
a 32-bit integer, and may be used to indicate what processor context is lost.
RISC-V _LPI objects must have appropriate flags set in this field as
specified in <a href="#table_lpi_arch_context_lost_flags">Table 4</a>:</p>
</div>
<table id="table_lpi_arch_context_lost_flags" class="tableblock frame-all grid-all" style="width: 90%;">
<caption class="title">Table 4. LPI Arch. Context Lost Flags</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">Bit offset</th>
<th class="tableblock halign-center valign-top">Bit width</th>
<th class="tableblock halign-center valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Set when the hart timer context is lost.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">31</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Reserved. Must be zero.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a href="#lpi_examples">Appendix A</a> provides examples for both a WFI entry method and SBI HSM
hart suspend entry methods.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="collaborative-processor-performance-control"><a class="anchor" href="#collaborative-processor-performance-control"></a>3.2. Collaborative Processor Performance Control</h3>
<div class="paragraph">
<p>ACPI describes the Collaborative Processor Performance Control (CPPC)
mechanism, which is an abstract and flexible mechanism for the operating
system to collaborate with an entity in the platform to manage the performance
of the harts.  The platform entity may be the hart itself, the platform
chipset, or a separate controller.</p>
</div>
<div class="paragraph">
<p>The ACPI _CPC object provides a way for the operating system to transition the
hart into a performance state selected from an abstract, continuous range of
values.  Fields in the _CPC object may be static integers or “Resource
Descriptors”.  The following subsection specifies a RISC-V system “Resource
Descriptor” for the _CPC object.</p>
</div>
<div class="sect3">
<h4 id="_cpc-object-resource-descriptor"><a class="anchor" href="#_cpc-object-resource-descriptor"></a>3.2.1. _CPC Object Resource Descriptor</h4>
<div class="paragraph">
<p>The _CPC object may use a “Resource Descriptor”, which is formatted per
<a href="#resource_descriptor_encoding">Chapter 2</a>, for many of its fields.  When using an FFH
Resource Descriptor for a _CPC field, it must be formatted as specified in
<a href="#table_cpc_resource_descriptor">Table 5</a>:</p>
</div>
<table id="table_cpc_resource_descriptor" class="tableblock frame-all grid-all" style="width: 90%;">
<caption class="title">Table 5. _CPC Resource Descriptor</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">Field</th>
<th class="tableblock halign-center valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><em>Address Space</em></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x7F (FFixedHW)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><em>Register Bit Width</em></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">64</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><em>Register Bit Offset</em></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><em>Access Size</em></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">4 (QWord)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><em>Register Address</em></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">As specified in the Bits[63:60],
                                    Bits[59:32], Bits[31:12] and
                                    Bits[11:0] columns of
                                    <a href="#table_cpc_register_address">Table 6</a></p></td>
</tr>
</tbody>
</table>
<table id="table_cpc_register_address" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. _CPC Register Address</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">Bits[63:60]<br>
  (Type)</th>
<th class="tableblock halign-center valign-top">Bits[59:32]</th>
<th class="tableblock halign-center valign-top">Bits[31:12]</th>
<th class="tableblock halign-center valign-top">Bits[11:0]</th>
<th class="tableblock halign-center valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x1</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x000_0000</p></td>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock">SBI CPPC Register ID</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">SBI CPPC access</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x000_0000</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">0x00000</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">CSR number</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">CSR access</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>All other encodings for _CPC Resource Descriptors with <em>Address Space</em>
set to <em>FFixedHW</em> (0x7f) are reserved for future use.</p>
</div>
<div class="paragraph">
<p><a href="#cppc_examples">Appendix B</a> provides examples for both a CSR access and an SBI CPPC
access.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="lpi_examples"><a class="anchor" href="#lpi_examples"></a>Appendix A: _LPI Object Examples</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-C hljs" data-lang="C">Device (C000) {              // HART0
    Name (_HID, “ACPI0007”)
    Name (_LPI,
        Package () {
            0,               // Revision
            0,               // LevelID
            3,               // Count

            // LPI1
            Package () {
                1,           // Min Residency (us)
                1,           // Worst case wakeup latency (us)
                1,           // Flags
                0,           // Arch. Context Lost Flags
                100,         // Residency Counter Frequency
                0,           // Enabled Parent State
                ResourceTemplate () {
                             // Entry Method
                    Register(FFixedHW, 64, 0,
                             0x0000_0000_0000_0000,
                             QWord)
                },
                ResourceTemplate () {
                             // Residency Counter Register
                    Register(SystemMemory, 0, 0, 0, 0)  // NULL
                },
                ResourceTemplate () {
                             // Usage Counter Register
                    Register(SystemMemory, 0, 0, 0, 0)  // NULL
                },
                             // State Name
                “RISC-V WFI”
            },

            // LPI2
            Package () {
                10,          // Min Residency (us)
                10,          // Worst case wakeup latency (us)
                1,           // Flags
                0,           // Arch. Context Lost Flags
                100,         // Residency Counter Frequency
                1,           // Enabled Parent State
                ResourceTemplate () {
                             // Entry Method
                    Register(FFixedHW, 64, 0,
                             0x1000_0000_0000_0000,
                             QWord)
                },
                ResourceTemplate () {
                             // Residency Counter Register
                    Register(SystemMemory, 0, 0, 0, 0)  // NULL
                },
                ResourceTemplate () {
                             // Usage Counter Register
                    Register(SystemMemory, 0, 0, 0, 0)  // NULL
                },
                             // State Name
                “RISC-V RET_DEFAULT”
            },

            // LPI3
            Package () {
                3500,        // Min Residency (us)
                100,         // Worst case wakeup latency (us)
                1,           // Flags
                0,           // Arch. Context Lost Flags
                100,         // Residency Counter Frequency
                1,           // Enabled Parent State
                ResourceTemplate () {
                             // Entry Method
                    Register(FFixedHW, 64, 0,
                             0x1000_0000_8000_0000,
                             QWord)
                },
                ResourceTemplate () {
                             // Residency Counter Register
                    Register(SystemMemory, 0, 0, 0, 0)  // NULL
                },
                ResourceTemplate () {
                             // Usage Counter Register
                    Register(SystemMemory, 0, 0, 0, 0)  // NULL
                },
                             // State Name
                “RISC-V NONRET_DEFAULT”
            }
        }
    )
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cppc_examples"><a class="anchor" href="#cppc_examples"></a>Appendix B: _CPC Object Examples</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-C hljs" data-lang="C">Device (C000) {              // HART0
    Name (_HID, “ACPI0007”)
    Name (_CPC,
        Package () {
            23,              // NumEntries
            3,               // Revision
            120,             // Highest Performance
            100,             // Nominal Performance
            40,              // Lowest Nonlinear Performance
            20,              // Lowest Performance
            ResourceTemplate () {
                             // Guaranteed Performance Register
                Register(SystemMemory, 0, 0, 0, 0)  // NULL
            },
            ResourceTemplate () {
                             // Desired Performance Register
                Register(FFixedHW, 64, 0,
                         0x1000_0000_0000_0005,
                         QWord)
            },
            ResourceTemplate () {
                             // Minimum Performance Register
                Register(SystemMemory, 0, 0, 0, 0)  // NULL
            },
            ResourceTemplate () {
                             // Maximum Performance Register
                Register(SystemMemory, 0, 0, 0, 0)  // NULL
            },
            ResourceTemplate () {
                             // Performance Reduction Tolerance Register
                Register(SystemMemory, 0, 0, 0, 0)  // NULL
            },
            ResourceTemplate () {
                             // Time Window Register
                Register(FFixedHW, 64, 0,
                         0x1000_0000_0000_0009,
                         QWord)
            },
            ResourceTemplate () {
                             // Counter Wraparound Time
                Register(SystemMemory, 0, 0, 0, 0)  // NULL
            },
            ResourceTemplate () {
                             // Reference Performance Counter Register
                Register(FFixedHW, 64, 0,
                         0x2000_0000_0000_0C01,
                         QWord)
            },
            ResourceTemplate () {
                             // Delivered Performance Counter Register
                Register(FFixedHW, 64, 0,
                         0x1000_0000_0000_000C,
                         QWord)
            },
            ResourceTemplate () {
                             // Performance Limited Register
                Register(FFixedHW, 64, 0,
                         0x1000_0000_0000_000D,
                         QWord)
            },
            ResourceTemplate () {
                             // CPPC EnableRegister
                Register(SystemMemory, 0, 0, 0, 0)  // NULL
            },
            ResourceTemplate () {
                             // Autonomous Selection Enable
                Register(SystemMemory, 0, 0, 0, 0)  // NULL
            },
            ResourceTemplate () {
                             // AutonomousActivityWindowRegister
                Register(SystemMemory, 0, 0, 0, 0)  // NULL
            },
            ResourceTemplate () {
                             // EnergyPerformancePreferenceRegister
                Register(SystemMemory, 0, 0, 0, 0)  // NULL
            },
            1,               // Reference Performance
            20,              // Lowest Frequency
            100,             // Nominal Frequency
        }
    )
}</code></pre>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="index.html">ACPI Functional Fixed Hardware</a></span>
</nav>
</article>  </div>
</main>
<div class="modal micromodal-slide" id="modal-versions" aria-hidden="true">
    <div class="modal__overlay" tabindex="-1" data-micromodal-close>
        <div class="modal__container" role="dialog" aria-modal="true">
            <main class="modal__content" id="modal-versions-content">
              <button data-micromodal-close class="modal-versions-close">
                <svg width="28px" height="28px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><defs><style>.cls-1h{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px;}</style></defs><title/><g id="cross"><line class="cls-1h" x1="7" x2="25" y1="7" y2="25"/><line class="cls-1h" x1="7" x2="25" y1="25" y2="7"/></g></svg>
              </button>
                  <ul class="nav-versions">
                      <li class="component">
                        <div>
                          <a class="title" href="index.html">ACPI Functional Fixed Hardware</a>
                        </div>                        <div class="version-item is-active">
                          <div>
                            <button class="version-toggle" type="button">
                              <span></span>
                              Stable
                            </button>
                          </div>
                          <ul class="versions">
  <li class="version">
    <a href="index.html">
      v1.0
    </a>
  </li>
</ul>                        </div>
                        
                      </li>
                      <li class="component">
                        <div>
                          <a class="title" href="../../aia/v1.0/index.html">Advanced Interrupt Architecture</a>
                        </div>                        <div class="version-item is-active">
                          <div>
                            <button class="version-toggle" type="button">
                              <span></span>
                              Stable
                            </button>
                          </div>
                          <ul class="versions">
  <li class="version">
    <a href="../../aia/v1.0/index.html">
      v1.0
    </a>
  </li>
</ul>                        </div>
                        
                      </li>
                      <li class="component">
                        <div>
                          <a class="title" href="../../etrace/v1.0/index.html">E-Trace Encapsulation Specification</a>
                        </div>                        <div class="version-item is-active">
                          <div>
                            <button class="version-toggle" type="button">
                              <span></span>
                              Stable
                            </button>
                          </div>
                          <ul class="versions">
  <li class="version">
    <a href="../../etrace/v1.0/index.html">
      v1.0
    </a>
  </li>
</ul>                        </div>
                        
                      </li>
                      <li class="component">
                        <div>
                          <a class="title" href="../../psabi/v1.0/index.html">ELF psABI Specification</a>
                        </div>                        <div class="version-item is-active">
                          <div>
                            <button class="version-toggle" type="button">
                              <span></span>
                              Stable
                            </button>
                          </div>
                          <ul class="versions">
  <li class="version">
    <a href="../../psabi/v1.0/index.html">
      v1.0
    </a>
  </li>
</ul>                        </div>
                        
                      </li>
                      <li class="component">
                        <div>
                          <a class="title" href="../../iommuArch/v1.0/index.html">IOMMU Architecture</a>
                        </div>                        <div class="version-item is-active">
                          <div>
                            <button class="version-toggle" type="button">
                              <span></span>
                              Stable
                            </button>
                          </div>
                          <ul class="versions">
  <li class="version">
    <a href="../../iommuArch/v1.0/index.html">
      v1.0
    </a>
  </li>
</ul>                        </div>
                        
                      </li>
                      <li class="component">
                        <div>
                          <a class="title" href="../../isa/index.html">ISA Specifications</a>
                        </div>                        <div class="version-item is-active">
                          <div>
                            <button class="version-toggle" type="button">
                              <span></span>
                              Stable
                            </button>
                          </div>
                          <ul class="versions">
  <li class="version">
    <a href="../../isa/index.html">
      default
    </a>
  </li>
</ul>                        </div>
                        
                      </li>
                      <li class="component">
                        <div>
                          <a class="title" href="../../reri/v1.0/index.html">RERI Architecture</a>
                        </div>                        <div class="version-item is-active">
                          <div>
                            <button class="version-toggle" type="button">
                              <span></span>
                              Stable
                            </button>
                          </div>
                          <ul class="versions">
  <li class="version">
    <a href="../../reri/v1.0/index.html">
      v1.0
    </a>
  </li>
</ul>                        </div>
                        
                      </li>
                      <li class="component">
                        <div>
                          <a class="title" href="../../qos/v1.0/index.html">RISC-V Capacity and Bandwidth QoS Register Interface</a>
                        </div>                        <div class="version-item is-active">
                          <div>
                            <button class="version-toggle" type="button">
                              <span></span>
                              Stable
                            </button>
                          </div>
                          <ul class="versions">
  <li class="version">
    <a href="../../qos/v1.0/index.html">
      v1.0
    </a>
  </li>
</ul>                        </div>
                        
                      </li>
                      <li class="component">
                        <div>
                          <a class="title" href="../../plic/v1.0.0/index.html">RISC-V Platform-Level Interrupt Controller</a>
                        </div>                        <div class="version-item is-active">
                          <div>
                            <button class="version-toggle" type="button">
                              <span></span>
                              Stable
                            </button>
                          </div>
                          <ul class="versions">
  <li class="version">
    <a href="../../plic/v1.0.0/index.html">
      v1.0.0
    </a>
  </li>
</ul>                        </div>
                        
                      </li>
                      <li class="component">
                        <div>
                          <a class="title" href="../../semihost/v1.0/index.html">semihosting</a>
                        </div>                        <div class="version-item is-active">
                          <div>
                            <button class="version-toggle" type="button">
                              <span></span>
                              Stable
                            </button>
                          </div>
                          <ul class="versions">
  <li class="version">
    <a href="../../semihost/v1.0/index.html">
      v1.0
    </a>
  </li>
</ul>                        </div>
                        
                      </li>
                  </ul>
            </main>
        </div>
    </div>
</div>

</div>
<footer class="hidden">
</footer><script src="../../_/js/vendor/import.js"></script>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script async src="../../_/js/vendor/spring-tabs.js" data-sync-storage-key="docs:preferred-tab"></script>
  </body>
</html>
